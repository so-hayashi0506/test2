**次世代GW端末**

**異常・運用コード**

**検出仕様書**

**Rev.G8**

<table>
<colgroup>
<col style="width: 44%" />
<col style="width: 26%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>作成</strong></th>
<th style="text-align: center;"><strong>照査</strong></th>
<th style="text-align: center;"><strong>認可</strong></th>
</tr>
</thead>
<tbody>
<tr>
<th style="text-align: center;"><p>2024/5/27</p>
<p>ESシス開</p>
<p>土谷 </p></th>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>

**　　　　　　　　　　　　　　　　　　　　　**

| **受領** |          |          |
|:--------:|:--------:|:--------:|
| **受入** | **照査** | **認可** |
|          |          |          |

**オムロン ソーシアルソリューションズ株式会社**

**エネルギーソリューション事業本部** **  
**

<u>変更履歴</u>

<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 6%" />
<col style="width: 5%" />
<col style="width: 51%" />
<col style="width: 9%" />
<col style="width: 6%" />
<col style="width: 6%" />
</colgroup>
<tbody>
<tr>
<td style="text-align: center;">日付</td>
<td style="text-align: center;">Ver.</td>
<td style="text-align: center;">ページ</td>
<td style="text-align: center;">変更箇所（変更理由）</td>
<td style="text-align: center;">担当者</td>
<td style="text-align: center;">照査</td>
<td style="text-align: center;">認可</td>
</tr>
<tr>
<td style="text-align: center;">2018.08.20</td>
<td style="text-align: center;">なし</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><p>CT722:次世代GW端末</p>
<p>新規作成</p></td>
<td style="text-align: center;"><p>DES</p>
<p>池本</p></td>
<td style="text-align: center;"><p>PDM</p>
<p>川上</p></td>
<td style="text-align: center;"><p>PDM</p>
<p>井浦</p></td>
</tr>
<tr>

<td style="text-align: center;">2018.12.27</td>
<td style="text-align: center;">A4</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><p>・2.異常検出一覧</p>
<p>発生箇所を追記、詳細説明に「GW端末」追記</p>
<p>・2.4.パワーコンディショナ台数不一致 (C1-4.0)の発生条件を説明文に合わせ「PV用」の文言を削除</p>
<p>・2.11.システム異常 (C3-3.0)の発生条件、検出方法を変更</p>
<p>・2.21.パワーコンディショナ通信タイムアウト (C6-B.0)の復旧条件を追記</p>
<p>・2.22.電力計通信タイムアウト (C6-D.0)の復旧条件を追記</p>
<p>・2.23.電力計異常(C6-E.0)の復旧条件を追記</p>
<p>2.36.蓄電残量低下(停電時) (C9-1.0)</p>
<p>2.37.運転許可スイッチOFF (C9-2.0)</p>
<p>2.38.放電停止SOC到達 (C9-3.0)</p>
<p>の復旧条件を追記</p>
<p>・3.運用検出一覧</p>
<p>蓄電PCSの設定関連運用コードを削除</p>
<p>パワーコンディショナ更新(0062)の発生箇所を削除</p>
<p>・運用履歴の検出条件追記</p></td>
<td style="text-align: center;"><p>SS</p>
<p>岡水</p></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">B</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><p>・2.異常検出一覧</p>
<p>C6-B 発生箇所を機器No.に変更</p>
<p>C8-1,C8-2,C8-3,C8-4 エラー名称・説明を</p>
<p>修正</p>
<p>C8-5,C8-6,C8-7 新規追加</p></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">2019.09.12</td>
<td style="text-align: center;">C</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><p>CT770:KPBP-A対応GW</p>
<p>・2.異常検出一覧</p>
<p>C8-8,C8-9,C8-A,C8-B,C9-4 新規追加</p>
<p>C6-8 発生条件、検出方法、復旧条件を修正</p>
<p>C6-B 発生条件、復旧条件を修正</p>
<p>C9-1,C9-2,C9-3 発生条件を修正</p>
<p>C3-B 復旧条件を修正</p>
<p>C1-3 判定条件について追記</p></td>
<td style="text-align: center;"><p>SS</p>
<p>大宅</p></td>
<td style="text-align: center;"><p>SS</p>
<p>岡水</p></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">2019.10.02</td>
<td style="text-align: center;">C1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><p>2.異常検出一覧</p>
<p>C1-3.0の復旧条件を修正。</p></td>
<td style="text-align: center;">SS岡水</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;"><p>SS</p>
<p>五十嵐</p></td>
</tr>
<tr>
<td style="text-align: center;">2019.10.10</td>
<td style="text-align: center;">C2</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><p>レビュー指摘修正</p>
<p>2.異常検出一覧表のC9-4.0の内容を修正。</p>
<p>C1-3.0の詳細説明を追記。</p>
<p>C3-B.0の復旧条件を修正。</p>
<p>C9-4.0のエラー名称を修正。</p></td>
<td style="text-align: center;"><p>SS</p>
<p>岡水</p></td>
<td style="text-align: center;">-</td>
<td style="text-align: center;"><p>SS</p>
<p>五十嵐</p></td>
</tr>
<tr>
<td style="text-align: center;">2019.10.15</td>
<td style="text-align: center;">C3</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><p>2.異常検出一覧</p>
<p>C1-B.0 新規追加。</p>
<p>C9-4.0 エラー名称をレビュー指摘に応じ修正。</p>
<p>C9-4.0 発生条件を修正。検出方法、復旧条件追記。</p></td>
<td style="text-align: center;"><p>SS</p>
<p>岡水</p></td>
<td style="text-align: center;">-</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">2019.10.17</td>
<td style="text-align: center;">C4</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">2.6. パワーコンディショナ構成設定異常 (C1-B.0)の検出方法誤記を修正</td>
<td style="text-align: center;"><p>SS</p>
<p>岡水</p></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">2019.10.28</td>
<td style="text-align: center;">C5</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><p>PCS側で検出されるため、C1-B.0パワーコンディショナ構成設定異常は検出不要。</p>
<p>2.異常検出一覧</p>
<p>C1-B.0 削除。</p>
<p>2.6. パワーコンディショナ構成設定異常 (C1-B.0)を削除</p></td>
<td style="text-align: center;"><p>SS</p>
<p>岡水</p></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">2019.11.21</td>
<td style="text-align: center;">C6</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">2.46　C9-4.0　システム組み合わせエラー　修正</td>
<td style="text-align: center;">土谷</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">2019.11.22</td>
<td style="text-align: center;">C7</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">2.46　C9-4.0システム組み合わせエラーPV値　修正</td>
<td style="text-align: center;">土谷</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">2019.12.3</td>
<td style="text-align: center;">C8</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">表紙変更、ファイル名変更、改訂履歴のメジャーバージョン先頭にテーマ名追記</td>
<td style="text-align: center;"><p>(環)PDC</p>
<p>土谷</p></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 2%" />
<col style="width: 49%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
</colgroup>
<tbody>
<tr>
<td>2019.12.10</td>
<td style="text-align: center;">C9</td>
<td style="text-align: center;"></td>
<td><p>「ハイブリッド」PCS記述内容を「マルチ蓄電」PCSに変更。</p>
<p>2.21パワーコンディショナ通信タイムアウト(C6-B.0)</p>
<p>2.43　蓄電残量低下(停電時) (C9-1.0)</p>
<p>2.44運転許可スイッチOFF (C9-2.0)</p>
<p>2.45　放電停止SOC到達 (C9-3.0)</p></td>
<td style="text-align: center;"><p>(環)PDC</p>
<p>土谷</p></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2020.1.21</td>
<td style="text-align: center;">C10</td>
<td style="text-align: center;"></td>
<td>3.20　蓄電池ファーム更新　追加</td>
<td style="text-align: center;"><p>(環)PDC</p>
<p>土谷</p></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2020.2.6</td>
<td style="text-align: center;">C11</td>
<td style="text-align: center;"></td>
<td><p>2.5　パワーコンディショナー構成不一致</p>
<p>　　　PCS、GW間のバージョン不一致による運転禁止</p></td>
<td style="text-align: center;"><p>(環)PDC</p>
<p>土谷/</p>
<p>木原</p></td>
<td style="text-align: center;"><p>(環)PDC</p>
<p>池本</p></td>
<td style="text-align: center;"><p>(環)PDC</p>
<p>井浦</p></td>
</tr>
<tr>
<td>2020.4.13</td>
<td style="text-align: center;">D1</td>
<td style="text-align: center;"></td>
<td><p>・下記異常コードを追加</p>
<p>C3-E</p>
<p>C3-F</p>
<p>・下記運用コードを追加</p>
<p>0073</p>
<p>0074</p>
<p>0075</p>
<p>0076</p>
<p>103b</p>
<p>103c</p></td>
<td style="text-align: center;"><p>(OSS)商開</p>
<p>木原</p></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2020.5.20</td>
<td style="text-align: center;">D2</td>
<td style="text-align: center;"></td>
<td><p>3.30.パワーコンディショナ接点入力ON (103b)</p>
<p>・検出方法を更新</p>
<p>3.31.パワーコンディショナ接点入力OFF (103c)</p>
<p>・検出方法を更新</p></td>
<td style="text-align: center;">SS岩井</td>
<td style="text-align: center;">SS小川</td>
<td style="text-align: center;">SS玉谷</td>
</tr>
<tr>
<td>2020.5.29</td>
<td style="text-align: center;">D3</td>
<td style="text-align: center;"></td>
<td><p>CU013 KPBP-A追加機能対応</p>
<p>2.異常検出一覧</p>
<p>C3-8,C3-9の発生箇所記載漏れを追記</p>
<p>C3-E,C3-Fを追加</p>
<p>列幅を調整</p>
<p>3.運用検出一覧</p>
<p>102f 内容、詳細説明変更</p>
<p>103a,103b,103c追加</p>
<p>列幅を調整</p>
<p>3.35設定保守(動作指令) (2003)</p>
<p>検出仕様にサービスサーバプロセスが検出するものを追記</p></td>
<td style="text-align: center;">SS岡水</td>
<td style="text-align: center;">SS小川</td>
<td style="text-align: center;">SS玉谷</td>
</tr>
<tr>
<td>2020.11.26</td>
<td style="text-align: center;">D4</td>
<td style="text-align: center;"></td>
<td><p>2.異常検出一覧</p>
<p>各異常の表について「検出方法」を「発生検出方法」に変更、「復旧検出方法」を追加</p>
<p>発生検出方法、復旧検出方法について具体的なロジックを記載</p>
<p>3.4. 初期設定終了(0020)</p>
<p>初期設定中に行った設定操作の運用履歴は残らない旨を記載</p>
<p>3.14. パワーコンディショナ更新(0062)</p>
<p>3.20. 蓄電池ファーム更新(0072)</p>
<p>記録タイミングが各PCSへのファームアップ開始処理時であることを記載</p>
<p>3.34. 設定保守(書込み)(2002)</p>
<p>3.35. 設定保守(動作指令)(2003)</p>
<p>3.36. 設定保守(任意)(2004)</p>
<p>外部通信以外の契機でも記録される旨を明記</p></td>
<td style="text-align: center;">SS坂本</td>
<td style="text-align: center;">SS小川</td>
<td style="text-align: center;">SS玉谷</td>
</tr>
<tr>
<td>2021.04.08</td>
<td style="text-align: center;">E</td>
<td style="text-align: center;"></td>
<td><p>捕捉率100%対応</p>
<p>　異常検出　C9-5:キーコード照合不一致を追加</p></td>
<td style="text-align: center;">（OSS）<br />
ES商開土谷</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2021.04.09</td>
<td style="text-align: center;">E1</td>
<td style="text-align: center;"></td>
<td><p>捕捉率100%対応　レビュー指摘点対応</p>
<p>・C9-5.検出方法等記載修正</p></td>
<td style="text-align: center;">(OSS）<br />
ES商開土谷</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2021.04.12</td>
<td style="text-align: center;">E2</td>
<td style="text-align: center;"></td>
<td><p>捕捉率100%対応　レビュー指摘点対応</p>
<p>・C9-5.検出方法等記載修正　</p>
<p>・発生、復旧条件記載内容の精緻化等</p></td>
<td style="text-align: center;"><p>(OSS）</p>
<p>ES商開土谷</p></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2021.04.13</td>
<td style="text-align: center;">E3</td>
<td style="text-align: center;"></td>
<td><p>捕捉率100%対応　レビュー指摘点反映漏対応</p>
<p>・C9-5.復旧条件記載内容修正</p></td>
<td style="text-align: center;">ES商開土谷</td>
<td style="text-align: center;">ES商開木原</td>
<td style="text-align: center;">ES商開井浦</td>
</tr>
<tr>
<td>2021.11.5</td>
<td style="text-align: center;">F</td>
<td style="text-align: center;"></td>
<td><p>V2X-GW対応</p>
<p>2.異常検出一覧に次を追加</p>
<p>・EVユニット・ケーブル寿命（C2-A）</p>
<p>・Webサーバ起動エラー（C2-B）</p>
<p>・mDSN起動エラー（C2-C）</p>
<p>3. 運用検出一覧に次を追加</p>
<p>・無線LAN設定変更（0060）</p>
<p>・マイグレーション実施（0077）</p>
<p>・スケジュール充放電関連（3000～3011）</p>
<p>・運用通知（3020）</p>
<p>・ECHONET Lite:運転モード設定（3030～3034）</p></td>
<td style="text-align: center;">FSI</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2021.11.18</td>
<td style="text-align: center;">F1</td>
<td style="text-align: center;"></td>
<td><p>運用コート修正</p>
<p>1．運用検出一覧に下記2~5を反映</p>
<p>2．無線LAN対応（EIGと共通運用コード追加）</p>
<p>・無線LANモード変更(0031)</p>
<p>・WPS無線接続成功(0032)</p>
<p>・WPS無線接続失敗(0033)</p>
<p>・WPS無線接続成功（STモード）(0034)</p>
<p>・WPS無線接続失敗（STモード）(0035)</p>
<p>・APモード子機接続(0036)</p>
<p>・STモード親機接続(0037)</p>
<p>3．記述内容追記</p>
<p>・無線LAN設定内容（0060）　フリーエリア追記</p>
<p>・マイグレーション実施(0077)　フリーエリア追記</p>
<p>4．項目名変更</p>
<p>・設定保守（書込み）を　PCS設定（書込み）に変更。（V2X-PCSでは、保守以外の設定があるため）</p>
<p>5．新規運用コード追加</p>
<p>・PCSイベント記録(2005)</p>
<p>・GW設定書込み(2006)</p>
<p>6．　1.2関連ドキュメントにフリーエリア出力内容一覧を追加</p>
<p>7．その他</p>
<p>・F版での下記修正内容を削除（3000~以降）</p>
<p>・F1版変更分との重複箇所箇所</p>
<p>・充放電状態取得（操作履歴ではないため）</p></td>
<td style="text-align: center;">ES商開土谷</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2021.12.04</td>
<td style="text-align: center;">F2</td>
<td style="text-align: center;"></td>
<td><p>運用履歴見直し見直し</p>
<p>新規運用コート追加　</p>
<p>マイグレーション実施終了(0078)</p>
<p>充放電スケジュール・カレンダー設定(0079)</p>
<p>PCSイベント記録、GW設定書き込み削除</p></td>
<td style="text-align: center;">ES商開土谷</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2021.12.07</td>
<td style="text-align: center;">F3</td>
<td style="text-align: center;"></td>
<td><p>異常コード見直し</p>
<p>・EVユニット・ケーブル寿命（C2-A.0）は、PCSのエラーコードのため削除し、Webサーバ起動エラーを（C2-A.0）、ｍDNS起動エラーを（C2-B..0）へ再定義する。</p>
<p>・運用コード　0031~0037</p>
<p>・FSIさんが記載した発生条件、検出方法を転記</p>
<p>・C2-C　追加</p></td>
<td style="text-align: center;">ES商開土谷</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2021．12.09</td>
<td style="text-align: center;">F4</td>
<td style="text-align: center;"></td>
<td><p>異常コード追加</p>
<p>・C2-D　無線LANエラー検知　追加</p></td>
<td style="text-align: center;">ES商開土谷</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2021.12.16</td>
<td style="text-align: center;">F5</td>
<td style="text-align: center;"></td>
<td><p>・C2-A.0Webサーバ接続エラー、C2-B.0ｍDNS接続エラーを削除。プロセス異常へ反映する。</p>
<p>・C2-D　無線LANエラー　をC3-4.0 へ変更（EIGと合わせる。）</p>
<p>・C6-B.0 、C9-2.0　V2X対応を追記</p>
<p>・C9-4.0　記載内容見直し</p></td>
<td style="text-align: center;">ES商開土谷</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2021.12.20</td>
<td style="text-align: center;">F6</td>
<td style="text-align: center;"></td>
<td><p>・マイグレーション開始、終了の運用履歴記録タイミングについて追記</p>
<p>・マイグレーション実施終了(0078)の発生条件、検出内容を記載</p></td>
<td style="text-align: center;"><p>FSI</p>
<p>内山</p></td>
<td style="text-align: center;"><p>FSI</p>
<p>山矢</p></td>
<td style="text-align: center;"><p>FSI</p>
<p>沖</p></td>
</tr>
<tr>
<td>2022.2.2</td>
<td style="text-align: center;">F7　</td>
<td style="text-align: center;"></td>
<td>3.45　名称変更：設定保守（書き込み）を元の名称に戻す。</td>
<td style="text-align: center;">ES商開土谷</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2022.2.3</td>
<td style="text-align: center;">F8</td>
<td style="text-align: center;"></td>
<td><p>・無線LAN異常(C3-4.0)の記載内容を見直した。</p>
<p>・無線LAN異常(C3-4.0)の項目が重複していたため、一方を削除した。</p>
<p>・2. 異常検出一覧において、無線LAN異常の項目を C2-D から C3-4 に移動した。</p>
<p>・充放電スケジュール・カレンダー設定(0079)を削除した。</p></td>
<td style="text-align: center;"><p>FSI</p>
<p>武田</p>
<p>内山</p></td>
<td style="text-align: center;"><p>FSI</p>
<p>山矢</p></td>
<td style="text-align: center;"><p>FSI</p>
<p>沖</p></td>
</tr>
<tr>
<td>2022.6.13</td>
<td style="text-align: center;">F9</td>
<td style="text-align: center;"></td>
<td>・2.15　設定データ不正(C3-6.0)：発生時“再起動”が記載漏れていたので追記。</td>
<td style="text-align: center;">ES商開土谷</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2022.12.1</td>
<td style="text-align: center;">F10</td>
<td style="text-align: center;"></td>
<td>・APモード子機接続(0036)、STAモード親機接続(0037)の検出方法を追記。</td>
<td style="text-align: center;">FSI<br />
武田</td>
<td style="text-align: center;">FSI<br />
山矢</td>
<td style="text-align: center;">FSI<br />
沖</td>
</tr>
<tr>
<td></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td><p>・マイグレーション開始（0077）、同終了（0078）を削除（開発スコープ対象外になったため）</p>
<p>・C2-C.0　充放電スケジュール、カレンダー設定値不正値検知を削除（発生契機無）</p>
<p>・C9-5.0 キーコード照合不一致にV2X仕様を追記</p></td>
<td style="text-align: center;"><p>ES商開</p>
<p>土谷</p></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2023.1.20</td>
<td style="text-align: center;">F11</td>
<td style="text-align: center;"></td>
<td><p>以下について、呼出しAPIの種別を表す親機/子機 の表記を APモード/STAモード と変更した。</p>
<blockquote>
<p>3.9. かんたん無線接続成功（APモード）(0032)</p>
<p>3.10. かんたん無線接続失敗（APモード）(0033)</p>
<p>3.11. かんたん無線接続成功（STAモード）(0034)</p>
<p>3.12. かんたん無線接続失敗（STAモード） (0035)</p>
<p>3.13. APモード子機接続 (0036)</p>
<p>3.14. STAモード親機接続 (0037)</p>
</blockquote>
<p>3.13 APモード子機接続 (0036)</p>
<blockquote>
<p>検出方法を変更</p>
</blockquote>
<p>3.14 STAモード親機接続 (0037)</p>
<blockquote>
<p>説明を訂正し、検出方法を変更</p>
</blockquote></td>
<td style="text-align: center;"><p>FSI</p>
<p>武田</p></td>
<td style="text-align: center;"><p>FSI</p>
<p>山矢</p></td>
<td style="text-align: center;"><p>FSI</p>
<p>沖</p></td>
</tr>
<tr>
<td>2023.3.14</td>
<td style="text-align: center;">F12</td>
<td style="text-align: center;"></td>
<td>C6-B.0のV2X-PCSの検出条件を変更</td>
<td style="text-align: center;"><p>ES商開</p>
<p>木原</p></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2023.6.7</td>
<td style="text-align: center;">F13</td>
<td style="text-align: center;"></td>
<td><p>3.20. 無線LAN設定変更 (0060)</p>
<p>フリーエリアに関する注釈を追記</p>
<p>3.21　有線LAN設定変更(0061)</p>
<p>　検出方法に有線を追記</p></td>
<td style="text-align: center;"><p>ES商開</p>
<p>木原</p>
<p>ES商開土谷</p></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2023.7.24</td>
<td style="text-align: center;">F14</td>
<td style="text-align: center;"></td>
<td>2.9. Webサーバ異常(C2-5.0)の記載を追加</td>
<td style="text-align: center;"><p>FSI</p>
<p>大木</p></td>
<td style="text-align: center;"><p>FSI</p>
<p>山矢</p></td>
<td style="text-align: center;"><p>FSI</p>
<p>沖</p></td>
</tr>
<tr>
<td>2023.9.1</td>
<td style="text-align: center;">F15</td>
<td style="text-align: center;"></td>
<td><p>2. 異常検出一覧のC3-4の詳細説明を変更した。</p>
<p>2.13 無線LAN異常(C3-4.0)の説明, 発生条件, 発生検出方法, 復旧条件, 復旧検出方法を変更した。</p></td>
<td style="text-align: center;"><p>FSI</p>
<p>武田</p></td>
<td style="text-align: center;"><p>FSI</p>
<p>山矢</p></td>
<td style="text-align: center;"><p>FSI</p>
<p>沖</p></td>
</tr>
<tr>
<td>2023.12.5</td>
<td style="text-align: center;">G</td>
<td style="text-align: center;"></td>
<td><p>併設対応</p>
<p>2．異常検出一覧</p>
<p>・2.6　C2-1.0　EEPROM異常（マイグレーション追加）</p>
<p>・2.7　C2-2.0 FLASHメモリ異常（マイグレーション追加）</p>
<p>・2.28　C6-F.0 Modbus機器通信異常(新規追加)</p>
<p>3．運用検出一覧</p>
<p>・3.5　0021:システム設定情報変更（併設追加他）</p>
<p>・3.33　0077:マイグレーション実施開始（新規追加）</p>
<p>・3.34　0078:マイグレーション実施終了（新規追加） </p></td>
<td style="text-align: center;">土谷</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2023.12.12</td>
<td style="text-align: center;">G1</td>
<td style="text-align: center;"></td>
<td><p>三相対応</p>
<p>・2.52　C9-6.0 パワーコンディショナ異常発生(新規追加)</p>
<p>併設対応レビュー指摘点の反映</p>
<p>・変更履歴</p>
<p>・Ｇ１重複箇所の削除</p>
<p>1.2　関連ドキュメント</p>
<p>　・異常履歴フリーエリア一覧を追加</p>
<p>２．異常検出一覧</p>
<p>・マイグレーション異常を新規に採番</p>
<p>・C2-1.1　マイグレーション異常（EEPROM）</p>
<p>・C2-2.1 マイグレーション異常（FLASHメモリ）</p>
<p>３．運用検出一覧</p>
<p>・2005削除（Gでの削除漏れ）</p></td>
<td style="text-align: center;"><p>池本</p>
<p>土谷</p></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2023.12.21</td>
<td style="text-align: center;">G2</td>
<td style="text-align: center;"></td>
<td><p>異常検出一覧</p>
<p>・C2-1,C2-2の発生条件からリストア時のマイグレーションを対象外とする。</p></td>
<td style="text-align: center;">土谷</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2024.2.16</td>
<td style="text-align: center;">G3</td>
<td style="text-align: center;"></td>
<td>2.54. システム組み合わせエラー(併設システム組み合わせ) (C9-4.1)を追加</td>
<td style="text-align: center;">木原</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2024.2.22</td>
<td style="text-align: center;">G4</td>
<td style="text-align: center;"></td>
<td>2.54. システム組み合わせエラー(併設システム組み合わせ) (C9-4.1)の検出条件記載見直し</td>
<td style="text-align: center;">木原</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2024.3.4</td>
<td style="text-align: center;">G5</td>
<td style="text-align: center;"></td>
<td>2.30. Modbus機器通信異常（C6-F.0）の復旧検出方法を追記</td>
<td style="text-align: center;">木原</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2024.3.5</td>
<td style="text-align: center;">G6</td>
<td style="text-align: center;"></td>
<td>2.30. Modbus機器通信異常（C6-F.0）の検出時限を決定</td>
<td style="text-align: center;">木原</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2024.4.11</td>
<td style="text-align: center;">G7</td>
<td style="text-align: center;"></td>
<td><p>2.57. 手動復帰待ち(C9-7.0)を追加</p>
<p>以下の条件記載を見直し</p>
<p>・3.36. 手動復帰待ち (102c)</p>
<p>・3.37. 手動復帰解除 (102d)</p></td>
<td style="text-align: center;">木原</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>2024.5.27</td>
<td style="text-align: center;">G8</td>
<td style="text-align: center;"></td>
<td><p>2．異常検出一覧　C2-5,C9-4.1,C9-7追加。C9.4→C9‐4.0。</p>
<p>2.30　Modbus通信異常→GW間通信異常へ変更</p>
<p>3.5　システム設定情報変更（使用用語の統一）</p>
<p>併設設定⇒併設運転有効無効設定</p></td>
<td style="text-align: center;">ESシス開土谷</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>

**- 目 次 –**

1\. 概要 17

**1.1.** **用語説明** 17

**1.2.** **関連ドキュメント** 17

**1.3.** **設計概要** 17

2\. 異常検出一覧 18

**2.1.** **時刻異常動作停止 (C1-1.0)** 21

**2.2.** **時刻同期異常 (C1-2.0)** 21

**2.3.** **パワーコンディショナ動作モード不一致 (C1-3.0)** 22

**2.4.** **パワーコンディショナ台数不一致 (C1-4.0)** 22

**2.5.** **パワーコンディショナ構成不一致 (C1-A.0)** 23

**2.6.** **EEPROM異常 (C2-1.0)** 24

**2.7.** **マイグレーション異常（EEPROM領域）(C2-１.1)\<G1\>** 24

**2.8.** **FLASHメモリ異常 (C2-2.0)** 24

**2.9.** **マイグレーション異常（FLASHメモリ領域） (C2-2.1)\<G1\>** 25

**2.10.** **FLASHメモリ寿命 (C2-3.0)** 25

**2.11.** **Webサーバ異常(C2-5.0)** 25

**2.12.** **ソフトウェア更新異常 (C3-1.0)** 26

**2.13.** **プロセス異常 (C3-2.0)** 26

**2.14.** **システム異常 (C3-3.0)** 27

**2.15.** 無線LAN異常**(C3-４.0)**　＜F4＞＜F5＞＜F8＞＜F15＞ 27

**2.16.** **時計異常(ドライバレベル) (C3-5.0)** 27

**2.17.** **設定データ不正 (C3-6.0)** 27

**2.18.** **ソフトウェア更新異常(パワーコンディショナ) (C3-8.0)** 28

**2.19.** **パワーコンディショナROM異常 (C3-9.0)** 28

**2.20.** **出力制御スケジュール異常 (C3-A.0)** 28

**2.21.** **出力制御スケジュールなし (C3-B.0)** 28

**2.22.** **ソフトウェア更新異常(蓄電池) (C3-E.0)** 29

**2.23.** **蓄電池ROM異常 (C3-F.0)** 29

**2.24.** **内部通信エラー(起動時タイムアウト) (C4-3.0)** 30

**2.25.** **運転切替エラー (C6-6.0)** 30

**2.26.** **出力制御エラー (C6-8.0)** 30

**2.27.** **パワーコンディショナ通信タイムアウト (C6-B.0)** 31

**2.28.** **電力計通信タイムアウト (C6-D.0)** 31

**2.29.** **電力計異常 (C6-E.0)** 31

**2.30.** **GW間通信異常\<G8\>（C6-F.0）\<G\>** 32

**2.31.** **LAN未接続(ソフト更新サーバ) (C7-1.0)** 32

**2.32.** **ソフト更新サーバ通信エラー (C7-2.0)** 32

**2.33.** **ソフト更新サーバ通信システムエラー (C7-3.0)** 32

**2.34.** **ソフト更新サーバエラー (C7-4.0)** 33

**2.35.** **電力サーバ通信エラー (C7-9.0)** 33

**2.36.** **電力サーバ通信システムエラー (C7-A.0)** 33

**2.37.** **電力サーバエラー (C7-B.0)** 33

**2.38.** **LAN未接続(電力サーバ) (C7-C.0)** 34

**2.39.** **遠隔モニタサーバ通信エラー(データ通知) (C8-1.0)** 34

**2.40.** **遠隔モニタサーバ通信システムエラー(データ通知) (C8-2.0)** 34

**2.41.** **遠隔モニタサーバエラー(データ通知) (C8-3.0)** 34

**2.42.** **LAN未接続(遠隔モニタサーバ) (C8-4.0)** 35

**2.43.** **遠隔モニタサーバ通信エラー(制御) (C8-5.0)** 36

**2.44.** **遠隔モニタサーバ通信システムエラー(制御) (C8-6.0)** 36

**2.45.** **遠隔モニタサーバエラー(制御) (C8-7.0)** 36

**2.46.** **LAN未接続(NTPサーバ) (C8-8.0)** 36

**2.47.** **NTPサーバ通信エラー (C8-9.0)** 36

**2.48.** **NTPサーバ通信システムエラー (C8-A.0)** 37

**2.49.** **NTPサーバエラー (C8-B.0)** 37

**2.50.** **蓄電残量低下(停電時) (C9-1.0)** 37

**2.51.** **運転許可スイッチOFF (C9-2.0)** 37

**2.52.** **放電停止SOC到達 (C9-3.0)** 38

**2.53.** **システム組み合わせエラー(誤パワーコンディショナ 組み合わせ) (C9-4.0)**＜F5＞ 39

**2.54.** **システム組み合わせエラー(併設システム組み合わせ) (C9-4.1)＜G3＞** 40

**2.55.** **キーコード照合不一致（C9-5.0）**＜E＞＜F10＞ 41

**2.56.** **パワーコンディショナ異常発生 (C9-6.0)**\<G1\> 41

**2.57.** **手動復帰待ち (C9-7.0)\<G7\>** 42

3\. 運用検出一覧 43

**3.1.** **起動 (0000)** 45

**3.2.** **検査モード開始 (0010)** 45

**3.3.** **ソフトウェア更新 (0015)** 45

**3.4.** **初期設定終了 (0020)** 45

**3.5.** **システム設定情報変更 (0021)** 46

**3.6.** **バックアップ (0025)** 46

**3.7.** **リストア (0026)** 46

**3.8.** **無線LANモード変更 (0031)**　＜F1＞＜F3＞ 46

**3.9.** **かんたん無線接続成功（APモード）(0032)** ＜F1＞＜F3＞ 46

**3.10.** **かんたん無線接続失敗（APモード）(0033)** ＜F1＞＜F3＞ 47

**3.11.** **かんたん無線接続成功（STAモード）(0034)** ＜F1＞＜F3＞ 47

**3.12.** **かんたん無線接続失敗（STAモード） (0035**) ＜F1＞＜F3＞ 47

**3.13.** **APモード子機接続 (0036)**　＜F1＞＜F3＞＜F10＞＜F11＞ 47

**3.14.** **STAモード親機接続 (0037)** ＜F1＞＜F3＞＜F10＞＜F11＞ 48

**3.15.** **異常履歴消去 (0041)** 48

**3.16.** **日時変更開始 (0054)** 48

**3.17.** **日時変更終了 (0055)** 48

**3.18.** **自動時刻変更開始 (0056)** 48

**3.19.** **自動時刻変更終了 (0057)** 49

**3.20.** **無線LAN設定変更 (0060)　** ＜F1＞\<F13\> 49

**3.21.** **有線LAN設定変更 (0061)** 49

**3.22.** **パワーコンディショナ更新 (0062)** 49

**3.23.** **出力制御設定変更 (0063)** 49

**3.24.** **出力制御スケジュール更新 (0064)** 50

**3.25.** **サーバ・HEMS接続変更 (0065)** 50

**3.26.** **ソフトウェア更新予約 (0066)** 50

**3.27.** **ソフトウェア更新予約解消 (0067)** 50

**3.28.** **蓄電池ファーム更新 (0072)** 51

**3.29.** **デバイスソフトウェア更新予約 (0073)** 51

**3.30.** **デバイスソフトウェア更新予約解消 (0074)** 51

**3.31.** **サブデバイスソフトウェア更新予約 (0075)** 51

**3.32.** **サブデバイスソフトウェア更新予約解消 (0076)** 52

**3.33.** マイグレーション実施開始 (0077) \<G\> 52

**3.34.** マイグレーション実施終了(0078) \<G\> 52

**3.35.** **パワーコンディショナ運転切替 (1010)** 53

**3.36.** **手動復帰待ち (102c)** 53

**3.37.** **手動復帰解除 (102d)** 53

**3.38.** **定期診断開始 (102f)** 53

**3.39.** **定期診断終了 (103a)** 53

**3.40.** **パワーコンディショナ接点入力ON (103b)** 53

**3.41.** **パワーコンディショナ接点入力OFF (103c)** 54

**3.42.** **設定保守開始 (2000)** 54

**3.43.** **設定保守終了 (2001)** 54

**3.44.** 設定保守(書込み) (2002) 54

**3.45.** **設定保守(動作指令) (2003)** 54

**3.46.** **設定保守(任意) (2004)** 55

**  
**

# **概要**

## **用語説明**

本書で使用する用語は次世代GW端末･クラウド_システム仕様指針書（(環)DES-B180703824）を参照とする。

## **関連ドキュメント**

> 本書と関連するドキュメントは以下の通り。

| ドキュメント名 | 資料NO. | 説明 |
|----|----|----|
| 異常コード_運用コード表マスタ | (環)PDT-B180201088 | 異常コードと運用コードを定義した資料 |
| 次世代GW端末＿運用履歴フリーエリア出力一覧 | (OSS)ES商開-G211216569-6 | 運用コード毎に出力するフリーエリア内容を定義した資料。メンテナンスデータにて取得する運用履歴に運用と共に出力される詳細内容を記載。 |
| 次世代GW端末＿異常履歴フリーエリア出力一覧　　\<G1\> | (OSS)ES商開-G211216569-8 | メンテナンスデータにて取得する異常履歴にエラーコードと共に出力される詳細内容を記載。 |
|  |  |  |
|  |  |  |

## **設計概要**

> 本仕様書は、次世代GW端末における操作および異常の検出について記載するものである。検出した操作および異常は、運用履歴、異常履歴またはメーカログに保存する。PCSの異常も同様に定周期で取得する異常状態から検出し、異常履歴または、メーカログに保存する。サーバ通信では、通信の状態をステータスとして更新しているので、その状態を監視し、運用履歴、異常履歴に保存する。詳細のエラー情報は、すべてメーカログに保存する。EIGおよびGW端末で定義しているすべての運用コードおよびエラーコードの定義に関しては、別紙「異常コード_運用コード表マスタ」を参照とする。

# **異常検出一覧**

> 検出する異常の一覧を下記に記載する。

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 13%" />
<col style="width: 29%" />
<col style="width: 48%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">コード</th>
<th style="text-align: center;">発生箇所</th>
<th style="text-align: center;">内容</th>
<th style="text-align: center;">詳細説明</th>
</tr>
</thead>
<tbody>
<tr>
<th style="text-align: center;">C1-1</th>
<td style="text-align: center;">-</td>
<td>時刻異常動作停止</td>
<td><p>起動時：</p>
<p>RTCで時刻が失われた場合に発生</p>
<p>サーバ時刻同期なし設定で夜間の自動時刻同期時：</p>
<p>RTCの時刻が異常値の場合に発生</p></td>
</tr>
<tr>
<th style="text-align: center;">C1-2</th>
<td style="text-align: center;">-</td>
<td>時刻同期異常</td>
<td><p>サーバ時刻同期なし設定で夜間の自動時刻同期時：</p>
<p>RTCからシステム時刻の同期をする時、10分以上離れている場合、RTCに問題ありとして発生。</p></td>
</tr>
<tr>
<th style="text-align: center;">C1-3</th>
<td style="text-align: center;">-</td>
<td>パワーコンディショナ動作モード不一致</td>
<td>常時：<br />
正常通信状態のPCSに対して、動作モードの同一不一致状態が10分以上継続した場合にエラーを発生。</td>
</tr>
<tr>
<th style="text-align: center;">C1-4</th>
<td style="text-align: center;">-</td>
<td>パワーコンディショナ台数不一致</td>
<td><p>起動５分後またはPCS設定変更（登録完了）5分後：</p>
<p>一度のみチェックする。</p>
<p>種別毎に無応答でないPCSが1台以上で、無応答PCSが1台でもあればエラーを発生。</p>
<p>※本エラーは初期設定時、又は保守員によるメンテナンス時にのみ発生することを想定。</p></td>
</tr>
<tr>
<th style="text-align: center;">C1-A</th>
<td style="text-align: center;"></td>
<td>パワーコンディショナ構成不一致</td>
<td>登録しているPCSのタイプ(PV、蓄電、ハイブリット)と通信しているタイプが異なっているかチェックする。具体的には、PV PCSとして登録したユニット番号のPCSが、PV PCSでない時(蓄電指定のパワコンが、蓄電パワコンでない時)に発生する。</td>
</tr>
<tr>
<th style="text-align: center;">C2-1.0</th>
<td style="text-align: center;">-</td>
<td>EEPROM異常</td>
<td><p>EEPROMのアクセスでエラー発生。</p>
<p>機器故障として動作停止。復旧にはリブートが必要。</p></td>
</tr>
<tr>
<th style="text-align: center;"><p>C2-1.1</p>
<p>&lt;G1&gt;</p></th>
<td style="text-align: center;"></td>
<td><p>マイグレーション異常</p>
<p>（EEPROM領域）</p></td>
<td>設定データのマイグレーションでエラー発生。</td>
</tr>
<tr>
<th style="text-align: center;">C2-2</th>
<td style="text-align: center;">-</td>
<td>FLASHメモリ異常</td>
<td><p>FLASHメモリアクセス時</p>
<p>Flash代替えの空きエリアがなくなった</p>
<p>機器故障として動作停止。復旧にはリブートが必要。</p></td>
</tr>
<tr>
<th style="text-align: center;"><p>C2-2.1</p>
<p>&lt;G1&gt;</p></th>
<td style="text-align: center;"></td>
<td><p>マイグレーション異常</p>
<p>（FLASHメモリ領域）</p></td>
<td>設定データ・実績データのマイグレーションでエラー発生。</td>
</tr>
<tr>
<th style="text-align: center;">C2-3</th>
<td style="text-align: center;">-</td>
<td>FLASHメモリ寿命</td>
<td>Flashの代替えの空きエリアが少なくなった（残100ブロック）、ワーニングレベル</td>
</tr>
<tr>
<th style="text-align: center;"><p>C2-5</p>
<p>&lt;G8&gt;</p></th>
<td style="text-align: center;">-</td>
<td>Webサーバ異常</td>
<td>Nginxまたはavahi-deamonのプロセスが起動していない場合にエラーが発生。</td>
</tr>
<tr>
<th style="text-align: center;">C3-1</th>
<td style="text-align: center;">-</td>
<td>ソフトウェア更新異常</td>
<td><p>本体ファームウェア更新時：</p>
<p>本体ファームウェアの更新でエラーが発生。</p>
<p>機器故障として動作停止。復旧にはリブートが必要。</p></td>
</tr>
<tr>
<th style="text-align: center;">C3-2</th>
<td style="text-align: center;">プロセスID</td>
<td>プロセス異常</td>
<td><p>プロセスの異常を検出時に発生</p>
<p>機器故障として動作停止。復旧にはリブートが必要。</p></td>
</tr>
<tr>
<th style="text-align: center;">C3-3</th>
<td style="text-align: center;">再起動回数</td>
<td>システム異常</td>
<td><p>規定回数の機器故障での再起動を検出時に発生</p>
<p>システム異常時は再起動をしない</p></td>
</tr>
<tr>
<th style="text-align: center;">C3-4</th>
<td style="text-align: center;">-</td>
<td>無線LAN異常</td>
<td><p>起動時：</p>
<p>無線LAN設定ファイル群の生成に失敗した場合に発生。&lt;F15&gt;</p></td>
</tr>
<tr>
<th style="text-align: center;">C3-5</th>
<td style="text-align: center;">-</td>
<td>時計異常（ドライバレベル）</td>
<td><p>RTCのハードエラーを検出した場合に発生。</p>
<p>機器故障として動作停止。復旧にはリブートが必要。</p></td>
</tr>
<tr>
<th style="text-align: center;">C3-6</th>
<td style="text-align: center;">-</td>
<td>設定データ不正</td>
<td><p>起動時：</p>
<p>設定データとアプリのバージョンが一致しない場合に発生。</p></td>
</tr>
<tr>
<th style="text-align: center;">C3-8</th>
<td style="text-align: center;"><p>ユニットNo</p>
<p>全体=99</p></td>
<td>ソフトウェア更新異常(パワーコンディショナ)</td>
<td><p>PCSファームウェア更新時：</p>
<p>パワーコンディショナファームウェアの更新でエラーが発生</p></td>
</tr>
<tr>
<th style="text-align: center;">C3-9</th>
<td style="text-align: center;">ユニットNo</td>
<td>パワーコンディショナROM異常</td>
<td>パワーコンディショナがROM異常で起動していない（ファーム更新失敗などで発生）</td>
</tr>
<tr>
<th style="text-align: center;">C3-A</th>
<td style="text-align: center;">-</td>
<td>出力制御スケジュール異常</td>
<td>スケジュールに100以上の値</td>
</tr>
<tr>
<th style="text-align: center;">C3-B</th>
<td style="text-align: center;">-</td>
<td>出力制御スケジュールなし</td>
<td><p>スケジュールデータがない</p>
<p>　最終日以降</p>
<p>　途中でデータなし</p></td>
</tr>
<tr>
<th style="text-align: center;">C3-E</th>
<td style="text-align: center;"><p>ユニットNo</p>
<p>全体=99</p></td>
<td>ソフトウェア更新異常（蓄電池）</td>
<td><p>蓄電池ファームウェア更新時：</p>
<p>蓄電池ファームウェアの更新でエラーが発生</p></td>
</tr>
<tr>
<th style="text-align: center;">C3-F</th>
<td style="text-align: center;">ユニットNo</td>
<td>蓄電池ROM異常</td>
<td>蓄電池がROM異常で起動していない（ファーム更新失敗などで発生）</td>
</tr>
<tr>
<th style="text-align: center;">C4-3</th>
<td style="text-align: center;">-</td>
<td>内部通信エラー（起動時タイムアウト）</td>
<td><p>起動時：</p>
<p>起動時に必要なプロセスが正常に起動しないときに発生</p>
<p>機器故障として動作停止。復旧にはリブートが必要。</p></td>
</tr>
<tr>
<th style="text-align: center;">C6-6</th>
<td style="text-align: center;">-</td>
<td>運転切替エラー</td>
<td style="text-align: left;"><p>運転切り替え操作時：</p>
<p>運転切替でパワコンから正常応答が返ってこない場合に発生</p></td>
</tr>
<tr>
<th style="text-align: center;">C6-8</th>
<td style="text-align: center;">-</td>
<td>出力制御エラー</td>
<td>計測部で出力制御の動作指定通りに動作していないことを検知した場合に発生</td>
</tr>
<tr>
<th style="text-align: center;">C6-B</th>
<td style="text-align: center;">ユニットNo</td>
<td>パワーコンディショナ 通信タイムアウト</td>
<td><p>蓄電パワコンとの通信断（60s間通信無応答）が発生。</p>
<p>（※蓄電PCSエラーコードE5-7.0と関連付けてエラーレベル、名称定義している）</p>
<p>PVモード（蓄電池無の運用モード）では検出しない。</p></td>
</tr>
<tr>
<th style="text-align: center;">C6-C</th>
<td style="text-align: center;">ユニットNo</td>
<td>蓄電池劣化</td>
<td>蓄電池が初期容量の60%を切ったことを検知した場合に発生</td>
</tr>
<tr>
<th style="text-align: center;">C6-D</th>
<td style="text-align: center;">ユニットNo</td>
<td>電力計通信タイムアウト</td>
<td>電力計の通信経路(ケーブル断線、ユニット番号不正など)のエラーが発生</td>
</tr>
<tr>
<th style="text-align: center;">C6-E</th>
<td style="text-align: center;">ユニットNo</td>
<td>電力計異常</td>
<td>電力計で異常が発生</td>
</tr>
<tr>
<th style="text-align: center;">C6-F</th>
<td style="text-align: center;">-</td>
<td>Modbus機器通信異常</td>
<td>Modbus通信機器の通信異常が発生(マスター/スレーブ)</td>
</tr>
<tr>
<th style="text-align: center;">C7-1</th>
<td style="text-align: center;">-</td>
<td>LAN未接続(ソフト更新サーバ）</td>
<td>FW更新サーバのLAN切断関係（LANケーブの抜け、ルータ異常など）のエラーが発生</td>
</tr>
<tr>
<th style="text-align: center;">C7-2</th>
<td style="text-align: center;">-</td>
<td>ソフト更新サーバ通信エラー</td>
<td>FW更新サーバの通信経路に関するエラーが発生<br />
（FW更新サーバからの応答なし）</td>
</tr>
<tr>
<th style="text-align: center;">C7-3</th>
<td style="text-align: center;">-</td>
<td>ソフト更新サーバ通信システムエラー</td>
<td>FW更新サーバの通信でEIG・GW端末にシステムエラーが発生</td>
</tr>
<tr>
<th style="text-align: center;">C7-4</th>
<td style="text-align: center;">-</td>
<td>ソフト更新サーバエラー</td>
<td><p>FW更新サーバから予期せぬエラーレスポンスを</p>
<p>受信した場合に発生</p>
<p>（アプリケーションレベルのエラー）</p></td>
</tr>
<tr>
<th style="text-align: center;">C7-9</th>
<td style="text-align: center;">-</td>
<td>電力サーバ通信エラー</td>
<td><p>電力サーバの通信経路に関するエラーが発生</p>
<p>（電力サーバからの応答なし）</p></td>
</tr>
<tr>
<th style="text-align: center;">C7-A</th>
<td style="text-align: center;">-</td>
<td>電力サーバ通信システムエラー</td>
<td>電力サーバの通信でEIG・GW端末にシステムエラーが発生</td>
</tr>
<tr>
<th style="text-align: center;">C7-B</th>
<td style="text-align: center;">-</td>
<td>電力サーバエラー</td>
<td><p>電力サーバから予期せぬエラーレスポンスを受信した場合に発生</p>
<p>（アプリケーションレベルのエラー）</p></td>
</tr>
<tr>
<th style="text-align: center;">C7-C</th>
<td style="text-align: center;">-</td>
<td>LAN未接続(電力サーバ）</td>
<td>電力サーバのLAN切断関係（LANケーブルの抜け、ルータ異常など）のエラーが発生</td>
</tr>
<tr>
<th style="text-align: center;">C8-1</th>
<td style="text-align: center;">-</td>
<td>遠隔モニタサーバ通信エラー(データ通知)</td>
<td><p>遠隔モニタサーバのHTTP側で通信経路に関するエラーが発生</p>
<p>（遠隔モニタサーバからの応答なし）</p></td>
</tr>
<tr>
<th style="text-align: center;">C8-2</th>
<td style="text-align: center;">-</td>
<td>遠隔モニタサーバ通信システムエラー(データ通知)</td>
<td>遠隔モニタサーバのHTTP通信でEIG・GW端末にシステムエラーが発生</td>
</tr>
<tr>
<th style="text-align: center;">C8-3</th>
<td style="text-align: center;">-</td>
<td>遠隔モニタサーバエラー(データ通知)</td>
<td><p>遠隔モニタサーバからHTTP側で予期せぬエラーレスポンスを受信した場合に発生</p>
<p>（アプリケーションレベルのエラー）</p></td>
</tr>
<tr>
<th style="text-align: center;">C8-4</th>
<td style="text-align: center;">-</td>
<td>LAN未接続(遠隔モニタサーバ）</td>
<td>遠隔モニタサーバのLAN切断関係（LANケーブルの抜け、ルータ異常など）のエラーが発生</td>
</tr>
<tr>
<th style="text-align: center;">C8-5</th>
<td style="text-align: center;">-</td>
<td>遠隔モニタサーバ通信エラー(制御)</td>
<td><p>遠隔モニタサーバのMQTT側で通信経路に関するエラーが発生</p>
<p>（遠隔モニタサーバからの応答なし）</p></td>
</tr>
<tr>
<th style="text-align: center;">C8-6</th>
<td style="text-align: center;">-</td>
<td>遠隔モニタサーバ通信システムエラー(制御)</td>
<td>遠隔モニタサーバのMQTT通信でEIG・GW端末にシステムエラーが発生</td>
</tr>
<tr>
<th style="text-align: center;">C8-7</th>
<td style="text-align: center;">-</td>
<td>遠隔モニタサーバエラー(制御)</td>
<td><p>遠隔モニタサーバからMQTT側で予期せぬエラーレスポンスを受信した場合に発生</p>
<p>（アプリケーションレベルのエラー）</p></td>
</tr>
<tr>
<th style="text-align: center;">C8-8</th>
<td style="text-align: center;">-</td>
<td>LAN未接続(NTPサーバ）</td>
<td>NTPサーバのLAN切断関係（LANケーブルの抜け、ルータ異常など）のエラーが発生</td>
</tr>
<tr>
<th style="text-align: center;">C8-9</th>
<td style="text-align: center;">-</td>
<td>NTPサーバ通信エラー</td>
<td><p>NTPサーバで通信経路に関するエラーが発生</p>
<p>（NTPサーバからの応答なし）</p></td>
</tr>
<tr>
<th style="text-align: center;">C8-A</th>
<td style="text-align: center;">-</td>
<td>NTPサーバ通信システムエラー</td>
<td>NTPサーバとの通信でEIG・GW端末にシステムエラーが発生</td>
</tr>
<tr>
<th style="text-align: center;">C8-B</th>
<td style="text-align: center;">-</td>
<td>NTPサーバエラー</td>
<td><p>NTPサーバから予期せぬエラーレスポンスを受信した場合に発生</p>
<p>（アプリケーションレベルのエラー）</p></td>
</tr>
<tr>
<th style="text-align: center;">C9-1</th>
<td style="text-align: center;">ユニットNo</td>
<td>蓄電残量低下(停電時)</td>
<td>PCS通信で停電時の蓄電残量低下を検出しエラー発生</td>
</tr>
<tr>
<th style="text-align: center;">C9-2</th>
<td style="text-align: center;">ユニットNo</td>
<td>運転許可スイッチOFF</td>
<td>蓄電PCSの運転許可スイッチがOFFのときにエラー発生</td>
</tr>
<tr>
<th style="text-align: center;">C9-3</th>
<td style="text-align: center;">ユニットNo</td>
<td>放電停止SOC到達</td>
<td>PCS通信で放電停止SOC到達(過放電防止)を検出しエラー発生</td>
</tr>
<tr>
<th style="text-align: center;"><p>C9-4.0</p>
<p>&lt;G8&gt;</p></th>
<td style="text-align: center;">-</td>
<td>システム組み合わせエラー(誤パワーコンディショナ　組み合わせ)</td>
<td>GWのシステム種別に対して、PCSの誤組み合わせを検出しエラー発生</td>
</tr>
<tr>
<th style="text-align: center;"><p>C9-4.1</p>
<p>&lt;G8&gt;</p></th>
<td style="text-align: center;">-</td>
<td>システム組み合わせエラー(併設システム組み合わせ)</td>
<td>併設システムにおいて、接続されたシステムとの組み合わせで使用できない場合にエラー発生</td>
</tr>
<tr>
<th style="text-align: center;">C9-5</th>
<td style="text-align: center;">ユニット　No.</td>
<td>キーコード不一致</td>
<td>キーコード照合処理で不一致を検出してエラー発生。</td>
</tr>
<tr>
<th style="text-align: center;">C9-6</th>
<td style="text-align: center;">ユニットNo</td>
<td>他社パワーコンディショナ異常発生</td>
<td>他社パワーコンディショナで異常が発生</td>
</tr>
<tr>
<th style="text-align: center;"><p>C9-7</p>
<p>&lt;G8&gt;</p></th>
<td style="text-align: center;">ユニットNo</td>
<td>手動復帰待ち</td>
<td>PCS状態が手動復帰待ちに変化。</td>
</tr>
</tbody>
</table>

## **時刻異常動作停止 (C1-1.0)**

> 時刻異常動作停止の仕様を下記に記載する。RTC内部の時刻が異常になるとシステムとして動作できなくなるため完全放電による消失と保持値を評価して検出する。

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">発生検出方法</th>
<th style="text-align: center;">復旧条件</th>
<th style="text-align: center;">復旧検出方法</th>
<th style="text-align: center;">発生時の動作</th>
</tr>
</thead>
<tbody>
<tr>
<th>起動時にコンデンサーの完全放電により、RTCが異常となっている場合</th>
<td>「/proc/driver/rtc_fosbit」が「1」の場合に異常と判断</td>
<td><p>LCD画面からの時刻設定</p>
<p>（手動復旧）</p></td>
<td>時刻設定が正常終了した場合に復旧と判断</td>
<td>エラーを出してデータの収集を停止</td>
</tr>
<tr>
<th>サーバ時刻同期なし設定で夜間の自動時刻同期時にRTCから取得した時刻が時刻として異常な場合</th>
<td>RTCの時刻を秒換算し負の値の場合に異常と判断</td>
<td><p>LCD画面からの時刻設定</p>
<p>（手動復旧）</p></td>
<td>時刻設定が正常終了した場合に復旧と判断</td>
<td>エラーを出してデータの収集を停止</td>
</tr>
</tbody>
</table>

## **時刻同期異常 (C1-2.0)**

> 時刻同期以上の仕様を下記に記載する。ローカル運用の時、RTCの時刻をLinuxのシステム時刻に想定以上の差が発生した場合にシステムとして異常なため差分値を評価して検出する。ただし、Linuxブート時の同期はシステム時刻の初期値である1970年1月1日とRTCの時刻に同期するため必ず差分が発生するため検出しない。

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">発生検出方法</th>
<th style="text-align: center;">復旧条件</th>
<th style="text-align: center;">復旧検出方法</th>
<th style="text-align: center;">発生時の動作</th>
</tr>
</thead>
<tbody>
<tr>
<th>サーバ時刻同期なし設定で夜間の自動時刻同期時に時刻同期で10分以上差が開いていた場合</th>
<td>RTCの時刻とLinuxのシステム時刻の差分値が10分以上の場合に異常と判断</td>
<td><p>LCD画面からの時刻設定</p>
<p>（手動復旧）</p></td>
<td>時刻設定が正常終了した場合に復旧と判断</td>
<td>エラーを出して、データの収集を継続</td>
</tr>
</tbody>
</table>

## **パワーコンディショナ動作モード不一致 (C1-3.0)**

> パワーコンディショナ動作モード不一致の仕様を下記に記載する。自立運転の設定が自動と手動でばらついた時などユーザが運転切替を能動的に実施できるようにするため接続しているPCSの動作モードを評価して検出する。

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">発生検出方法</th>
<th style="text-align: center;">復旧条件</th>
<th style="text-align: center;">復旧検出方法</th>
<th style="text-align: center;">発生時の動作</th>
</tr>
</thead>
<tbody>
<tr>
<th>運転切替、起動後、動作モード（※１）の不一致状態が10分以上継続した場合</th>
<td>正常に通信している複数PCSで動作モードが異なるPCSが1台でもある場合に異常と判断</td>
<td><p>運転切替を行う</p>
<p>(動作モードが前回値と異なるPCS1台以上の場合)</p></td>
<td>動作モード(※1)が一致した場合に復旧と判断（※2）</td>
<td>エラーを表示する</td>
</tr>
</tbody>
</table>

> (※1) 動作モードは動作ステータス(内部動作ステータス：ステータス確認用)(42:0000)の下位2bitで表される運転モードで不一致判定を行う。
>
> (※2) PCS登録変更を行うと一旦復旧し、発生条件に当てはまれば再度発生する。
>
> また、不一致を起こしているPCSの通信状態が正常以外となり検出対象外となった場合にも復旧する。

## **パワーコンディショナ台数不一致 (C1-4.0)**

> パワーコンディショナ台数不一致の仕様を下記に記載する。PV、蓄電池、ハイブリットの種別毎でPCS登録設定時の検索で設定したPCS台数と通信している台数が一致するかを評価して検出する。PVは夜間に切れるため、種別毎で全台数が無応答の場合はエラーとしない。

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">発生検出方法</th>
<th style="text-align: center;">復旧条件</th>
<th style="text-align: center;">復旧検出方法</th>
<th style="text-align: center;">発生時の動作</th>
</tr>
</thead>
<tbody>
<tr>
<th>PCS登録（※１）の5分後(※２)で、1台以上PCSが接続されている時に、設定したPCS台数と検索できた台数が一致しなかった場合</th>
<td>PCS登録の台数と通信しているPCSの台数が異なる場合に異常と判断</td>
<td><p>・GW起動時</p>
<p>　PCSの起動状況を確認して、PCSを起動させる</p>
<p>・PCS登録決定時</p>
<p>　PCSの接続状況を確認して、再度PCS登録設定を行う</p></td>
<td>PCS登録の台数と通信しているPCSの台数が一致した場合に復旧と判断(※3)</td>
<td>エラーを表示する</td>
</tr>
</tbody>
</table>

> （※１）ここでの「PCS登録」は、「起動時」と「PCS登録決定時」を表しています。
>
> （※２）「通信タイムアウト時間＊最大接続台数＋マージン」を元に算出しています。
>
> （※３）GW再起動やPCS登録を伴わなくても、通信状態が正常となり登録台数と通信中台数が一致すれば復旧する。

## **パワーコンディショナ構成不一致 (C1-A.0)**

> パワーコンディショナ構成不一致の仕様を下記に記載する。PCSを起動しない状態でPCSの構成を手動で登録したさいに誤設定を検知するため、PV、蓄電池、ハイブリットの種別毎でPCS登録設定時の検索で設定したPCS種別と通信しているPCSの種別が一致するかを評価して検出する。

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">発生検出方法</th>
<th style="text-align: center;">復旧条件</th>
<th style="text-align: center;">復旧検出方法</th>
<th style="text-align: center;">発生時の動作</th>
</tr>
</thead>
<tbody>
<tr>
<th>1台でも接続されているPCSが登録の種別と異なる場合</th>
<td>接続しているPCSの種別(※1)と登録されているPCSの種別が異なる場合に異常と判断</td>
<td>設備の見直し(置き換え、設定変更)を行い、再度設定を行う。</td>
<td>接続しているPCSの種別と登録されているPCSの種別が一致した場合に復旧と判断（※5）</td>
<td><p>エラーを表示する。</p>
<p>通信異常とする。</p></td>
</tr>
<tr>
<th>1台でも接続されているPCSが登録の配電方式と異なる場合&lt;A1&gt;</th>
<td>PCSの配電方式(※2)が単相三線(0)以外の場合に異常と判断</td>
<td>設備の見直し(置き換え、設定変更)を行い、再度設定を行う。</td>
<td>配電方式が単相三線(0)の場合に復旧と判断（※5）</td>
<td><p>エラーを表示する。</p>
<p>通信異常とする。</p></td>
</tr>
<tr>
<th>1台でも接続されているPCSが旧プロトコルの場合&lt;A1&gt;</th>
<td>接続しているPCSのPFバージョン(※3)が新プロトコル(1)以外の場合に異常と判断</td>
<td>設備の見直し(置き換え、設定変更)を行い、再度設定を行う。</td>
<td>PFバージョンが新プロトコル(1)の場合に復旧と判断（※5）</td>
<td><p>エラーを表示する。</p>
<p>通信異常とする。</p></td>
</tr>
<tr>
<th>GWから接続不可のバージョン搭載のPCSを接続時。</th>
<td>運転許可実施時にGW、PCSのバージョン(※4)が異なる場合に異常と判断</td>
<td>GWもしくは（及び）PCSのファーム更新</td>
<td>GW、PCSのバージョンが一致した場合に復旧と判断（※5）</td>
<td><p>エラーを表示する。</p>
<p>運転不可。</p></td>
</tr>
</tbody>
</table>

> (※1)42:101E「機種判別要素：パワコン種別」の読み出し値
>
> (※2)42:101F「機種判別要素：配電方式」の読み出し値
>
> (※3)41:9999「新旧プロトコル判別要素」の読み出し値
>
> (※4)42:1023「GW-PCS間IF Ver」の読み出し値
>
> （※5）PCS登録変更を行うと一旦復旧し、発生条件に当てはまれば再度発生する

## **EEPROM異常 (C2-1.0)**

> EEPROM異常の仕様を下記に記載する。EEPROMの故障を判定するため、EEPROMに読み書き（リトライ3回）の結果を評価して検出する。

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">発生検出方法</th>
<th style="text-align: center;">復旧条件</th>
<th style="text-align: center;">復旧検出方法</th>
<th style="text-align: center;">発生時の動作</th>
</tr>
</thead>
<tbody>
<tr>
<th><p>EEPROMメモリチェックで</p>
<p>設定データの初期化が失敗した場合</p>
<p>（正副両方読み込み不可）</p></th>
<td>EEPROMに読み書き（リトライ3回）の結果を評価して判断</td>
<td>なし（※1）</td>
<td>なし（※1）</td>
<td><p>破損部分を初期値で運用する。（※2）</p>
<p>その際、EEPROMに反映させず、</p>
<p>EEPROMの書き込みを禁止する。設定データを保護する。</p>
<p>その際、実績記録は行わない。</p></td>
</tr>
<tr>
<th>設定データの書き込みが失敗した場合</th>
<td>EEPROMに読み書き（リトライ3回）の結果を評価して判断</td>
<td>なし（※1）</td>
<td>なし（※1）</td>
<td>EEPROMの書き込みを禁止し、設定データを保護する。（実績保存は行わない）</td>
</tr>
</tbody>
</table>

（※1）ハードウェアの故障が要因となるため、システム動作中の復旧は存在しない。

（※2）設定値のバックアップが実行出来るように、立ち上がり、実績記録を停止する。

## **マイグレーション異常（EEPROM領域）(C2-１.1)\<G1\>**

> ＥＥＰＲＯＭ上の設定データのマイグレーション失敗時の仕様を下記に示す。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 設定データのバージョンアップ時マイグレーションで失敗した場合\<G\>\<G2\> | EEPROMに読み書き（リトライ3回）の結果を評価して判断 | なし（※1） | なし（※1） | EEPROMの書き込みを禁止し、設定データを保護する。（実績保存は行わない） |

（※1）ハードウェアの故障が要因となるため、システム動作中の復旧は存在しない。

## **FLASHメモリ異常 (C2-2.0)**

> FLASHメモリ異常の仕様を下記に記載する。FLASHメモリの故障およびFLASHメモリの不良ブロックの増加により、保持期間の要件を満たせなくなる前に、異常を発生させる (データのパーティションのみ対象)
>
> 不良ブロックは以下のタイミングで検出する。
>
> ・FLASH読み込み時
>
> ・FLASH書き込み時（削除も含む）

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| FLASHメモリの正常なブロック数が閾値を下回る場合 | 残ブロック数を評価して判断(5未満) | なし（※1） | なし(※1) | 残ブロックが機器故障の許容数を超えているため重度のエラーで実績記録も停止させる。 |

（※1）ハードウェアの故障が要因となるため、システム動作中の復旧は存在しない。

## **マイグレーション異常（FLASHメモリ領域）** **(C2-2.1)\<G1\>**

> FLASHメモリ（NANDメモリ）上の設定データ、実績データのマイグレ―ション失敗時の仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 設定データのバージョンアップ時マイグレーションで失敗した場合\<G\> | FLASHメモリに読み書きの結果を評価して判断。 | なし（※1） | なし(※1) | システム異常へ遷移し再起動 |
| 実績データのバージョンアップ時マイグレーションで失敗した場合\<G\>\<G2\> | FLASHメモリに読み書きの結果を評価して判断。 | 発生後、即時復旧 | ― | 画面で異常を表示 |

（※1）ハードウェアの故障が要因となるため、システム動作中の復旧は存在しない。

## **FLASHメモリ寿命 (C2-3.0)**

> FLASHメモリ寿命の仕様を下記に記載する。FLASHメモリの空き

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| FLASHメモリの正常なブロック数が閾値を下回る場合 | 残ブロック数を評価して判断(100未満) | 再起動(※1) | 残ブロック数が100以上であれば復旧(※1) | 残ブロックがまだ機器故障の許容数に足していない場合は軽度の障害であり実績記録を継続させる。 |

> （※1）ハードウェアの故障が要因である場合、残ブロック数が回復することはないが、エラー発生状態でも継続動作可能である。再起動後も残ブロック数が閾値を下回っていれば再度異常発生する。

## **Webサーバ異常(C2-5.0)**

> Webサーバ異常の仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| Nginxまたはavahi-deamonのプロセスが起動していない場合 | psコマンドを定期的に実行しプロセスが起動されていないことを検出する | 再起動 | 定期的に実行しているpsコマンドでプロセスが起動していることを検出する | ローカルモニタ機能が使用できない状態だがGWは継続させる。 |

## **ソフトウェア更新異常 (C3-1.0)**

> ソフトウェア更新異常の仕様を下記に記載する。ソフトウェア更新に失敗した場合にソフトウェア更新を再実施するため、ソフトウェア更新異常となる。USBのファイルチェックはUIで実施するためエラーは発生させない。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| USBメモリにアクセスができない場合 | －(※1) | － | － | 画面で異常を表示 |
| USBメモリの指定パスにファームファイルがない場合 | －(※1) | － | － | 同上 |
| USBメモリの指定パスに複数のファームファイルが存在する場合 | －(※1) | － | － | 同上 |
| ファームファイルがgpgで復号できない場合 | ファームファイルの復号可否を評価して判断 | －(※2) | －(※2) | 画面で異常を表示して再起動 |
| バージョンアップができないバージョンを指定する場合 | バージョンファイルの指定バージョン範囲を評価して判断 | －(※2) | －(※2) | 同上 |
| ファーム更新APIが異常を応答する場合 | ファーム更新のAPIの応答を評価して判断 | －(※2) | －(※2) | 同上 |

> (※1)UIで表示するのみで、C3-1.0は発生しない
>
> (※2)強制再起動するため復旧はしないが、C3-1.0の異常履歴が記録される

## **プロセス異常 (C3-2.0)**

> プロセス異常の仕様を下記に記載する。メモリリークや例外処理でプロセスが落ちたことを監視するため、プロセスの死活監視に失敗したことを評価して検出する。WDTの更新をしているプロセスが落ちた場合はWDTの再起動で復帰をおこなう。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 異常なプロセス終了をした場合 | 死活監視の結果を評価して判断 | － | － | システム異常へ遷移し再起動 |

## **システム異常 (C3-3.0)**

> 機器故障が発生した場合に再起動をおこなうがハードウェア障害の場合など再起動を繰り返すことになってしまうため、規定回数でシステム異常として停止させる。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 機器故障で再起動が発生した場合 | 機器故障で再起動実施直前に再起動した回数を評価して判断 | － | － | PCS通信停止 |

表 1 リブート通知

## 無線LAN異常**(C3-４.0)**　＜F4＞＜F5＞＜F8＞＜F15＞

　　　　復旧不可能な無線LAN制御異常発生時に記録する。

また、要因となった内容をフリーエリアに記録する。

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">発生検出方法</th>
<th style="text-align: center;">復旧条件</th>
<th style="text-align: center;">復旧検出方法</th>
<th style="text-align: center;">発生時の動作</th>
</tr>
</thead>
<tbody>
<tr>
<th>起動時の無線LAN設定ファイル群の生成に失敗した場合</th>
<td><p>次のシステムコールの応答を評価して判断</p>
<p>　・ディレクトリ作成</p>
<p>　・ファイルオープン</p>
<p>　・ファイル書き込み</p>
<p>　・ファイルクローズ</p></td>
<td>－</td>
<td>－</td>
<td>システム異常へ遷移し再起動</td>
</tr>
</tbody>
</table>

## **時計異常(ドライバレベル)** **(C3-5.0)**

> 時計異常(ドライバ)の仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| RTCへ時刻書込みが失敗した場合 | RTC書込みのシステムコールの応答を評価して判断 | － | － | システム異常へ遷移し再起動 |

## **設定データ不正 (C3-6.0)**

> 設定データ不正の仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 起動時にアプリが認識できない設定データのバージョンを検出した場合 | 設定バージョン(※1)を評価して判断 | バージョンアップ | 設定バージョン(※1)を評価して判断 | システム異常へ遷移し再起動\<F1\> |

> (※1)ソースコード埋め込みの設定バージョンとEEPROM書き込みの設定バージョンを比較

## **ソフトウェア更新異常(パワーコンディショナ) (C3-8.0)**

> ソフトウェア更新異常(パワーコンディショナ)の仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| PCSのファームアップ更新時にPCSのファームアップに失敗した場合 | ファームアップシーケンスの異常有無を評価して判断 | 発生後、即時復旧(※1) | －(※1) | 画面で異常を表示 |

> (※1)PCS更新異常については異常状態が残ると復旧できないため、発生後に即時復旧とする

## **パワーコンディショナROM異常 (C3-9.0)**

> パワーコンディショナROM異常の仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| PCSとの通信開始時にパワーコンディショナのROM異常を検出した場合 | アップデート進捗ステータス(※1)を評価して判断 | PCSのファームアップを再実施 | アップデート進捗ステータス(※1)を評価して判断(※2) | 画面で異常を表示 |

> （※1）CE:0010「アップデート進捗ステータス」の読み出し値
>
> 最上位1バイトが下記の値の場合にROM異常と判定する
>
> ・0xE1(アプリMCU消去異常)
>
> ・0xE2(アプリMCU書換え異常)
>
> ・0xE3(インバータMCU消去異常)
>
> ・0xE5(双方向MCU消去異常)
>
> (※2) PCS登録変更を行うと一旦復旧し、発生条件に当てはまれば再度発生する

## **出力制御スケジュール異常 (C3-A.0)**

> 出力制御スケジュール異常の仕様を下記に記載する。

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">発生検出方法</th>
<th style="text-align: center;">復旧条件</th>
<th style="text-align: center;">復旧検出方法</th>
<th style="text-align: center;">発生時の動作</th>
</tr>
</thead>
<tbody>
<tr>
<th>スケジュールの制御値に100より大きい値を検出した場合</th>
<td>スケジュールの制御値を評価して判断</td>
<td><p>・スケジュールを更新</p>
<p>・出力制御設定を変更</p></td>
<td><p>スケジュール更新後、100以下の制御値となれば復旧</p>
<p>出力制御設定により、検出不要と判断される場合は復旧(※1)</p></td>
<td>出力制御を停止</td>
</tr>
</tbody>
</table>

> 　(※1)出力制御設定の結果、下記の条件を満たした場合は異常検出不要とし復旧する

・出力制御無効に設定

・「出力制御有効」かつ「スケジュール取得オフライン」かつ「動作方式が全台クリップ」

## **出力制御スケジュールなし (C3-B.0)**

> 出力制御スケジュールなしの仕様を下記に記載する。

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">発生検出方法</th>
<th style="text-align: center;">復旧条件</th>
<th style="text-align: center;">復旧検出方法</th>
<th style="text-align: center;">発生時の動作</th>
</tr>
</thead>
<tbody>
<tr>
<th>更新されずに最終日以降の日付となるかスケジュールデータの欠損でスケジュールデータがない場合</th>
<td>スケジュールの有無を評価して判断</td>
<td>・スケジュールを更新・出力制御設定を変更</td>
<td><p>スケジュール更新後、スケジュールデータが存在すれば復旧</p>
<p>出力制御設定により、検出不要と判断される場合は復旧(※1)</p></td>
<td>出力制御を停止</td>
</tr>
</tbody>
</table>

> 　(※1)出力制御設定の結果、下記の条件を満たした場合は異常検出不要とし復旧する

・出力制御無効に設定

・「出力制御有効」かつ「スケジュール取得オフライン」かつ「動作方式が全台クリップ」

## **ソフトウェア更新異常(蓄電池) (C3-E.0)**

> ソフトウェア更新異常(蓄電池)の仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 蓄電池のファームアップ更新時に蓄電池のファームアップに失敗した場合 | ファームアップシーケンスの異常有無を評価して判断 | 発生後、即時復旧(※1) | －(※1) | 画面で異常を表示 |

> ※蓄電池更新異常については異常状態が残ると復旧できないため、発生後に即時復旧とする

## **蓄電池ROM異常 (C3-F.0)**

> 蓄電池ROM異常の仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| PCSとの通信開始時に蓄電池のROM異常を検出した場合 | アップデート進捗ステータス（※1）を評価して判断 | 蓄電池のファームアップを再実施 | アップデート進捗ステータス(※1)を評価して判断(※2) | 画面で異常を表示 |

> （※1）CE:0010「アップデート進捗ステータス」の読み出し値
>
> 最上位1バイトが下記の値の場合にROM異常と判定する
>
> ・0xEB(蓄電池ファームROM異常)
>
> (※2) PCS登録変更を行うと一旦復旧し、発生条件に当てはまれば再度発生する

## **内部通信エラー(起動時タイムアウト) (C4-3.0)**

> 内部通信エラー(起動時タイムアウト)の仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 起動時にすべての必要なプロセスが起動されない場合 | プロセスの初期応答の有無を評価して判断 | － | － | システム異常へ遷移し再起動 |

## **運転切替エラー (C6-6.0)**

> 運転切替エラーの仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| PCSへの運転指示のコマンドが失敗をした場合 | PCSへのコマンド応答を評価して判断 | 運転切替を再実行して成功 | 運転切替が全台成功した場合に復旧と判断 | 画面にエラー表示 |
| PCSへ運転指令成功後にPCSの運転指令が一定時間変化しない場合 | PCSへ指示後に一定時間運転指令値を読みだし評価して判断 | 同上 | 同上 | 画面にエラーを表示 |

## **出力制御エラー (C6-8.0)**

> 出力制御エラーの仕様を下記に記載する。電力計に関する異常が発生しても余剰制御から全量制御に変わるだけであり出力制御エラーとはならない。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 出力制御「あり」の状態で、契約容量またはクリップ容量が0の場合 | 出力制御設定、契約情報を評価して判断 | ・正しい設定を実施 | 出力制御設定、契約情報を評価して判断（※1） | 画面にエラーを表示 |

> (※1) PCS登録変更を行うと一旦復旧し、発生条件に当てはまれば再度発生する

## **パワーコンディショナ通信タイムアウト (C6-B.0)**

> パワーコンディショナ通信タイムアウトの仕様を下記に記載する。

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">発生検出方法</th>
<th style="text-align: center;">復旧条件</th>
<th style="text-align: center;">復旧検出方法</th>
<th style="text-align: center;">発生時の動作</th>
</tr>
</thead>
<tbody>
<tr>
<th><p>・蓄電PCS、マルチ蓄電PCSとの通信が60秒無応答の場合</p>
<p>・V2X-PCSとの通信が120秒無応答の場合&lt;F12&gt;</p></th>
<td>通信の応答を評価して判断</td>
<td>・正常に通信が成功</td>
<td>通信の応答を評価して判断（※1）(※2)</td>
<td>画面にエラーを表示</td>
</tr>
</tbody>
</table>

> (※1) PCS登録変更を行うと一旦復旧し、発生条件に当てはまれば再度発生する
>
> (※2)下記の要因により周期処理の初期化（無応答状態のクリア)が行われると一旦復旧し、発生条件に当てはまれば再度発生する
>
> 　　　・PCSFW更新後（成否に関わらず周期処理初期化）
>
> 　　　・蓄電池FW更新後（成否に関わらず周期処理初期化）

## **電力計通信タイムアウト (C6-D.0)**

>  電力計通信タイムアウトの仕様を下記に記載する。

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">発生検出方法</th>
<th style="text-align: center;">復旧条件</th>
<th style="text-align: center;">復旧検出方法</th>
<th style="text-align: center;">発生時の動作</th>
</tr>
</thead>
<tbody>
<tr>
<th>電力計との通信が5秒無応答の場合</th>
<td>通信の応答を評価して判断</td>
<td>・正常に通信が成功</td>
<td>通信の応答を評価して判断（※1）</td>
<td><p>画面にエラーを表示</p>
<p>出力制御有効で余剰制御中は全量制御とし出力制御をとめない</p></td>
</tr>
</tbody>
</table>

> (※1) 電力計登録変更を行うと一旦復旧し、発生条件に当てはまれば再度発生する

## **電****力計異常 (C6-E.0)**

> 電力計異常の仕様を下記に記載する。

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">発生検出方法</th>
<th style="text-align: center;">復旧条件</th>
<th style="text-align: center;">復旧検出方法</th>
<th style="text-align: center;">発生時の動作</th>
</tr>
</thead>
<tbody>
<tr>
<th>電力計のエラーを通信で検出した場合</th>
<td>電力計のエラーエリアを読み出した値を評価して判断</td>
<td>・電力計のエラーが解消</td>
<td>電力計のエラーエリアを読み出した値を評価して判断(※1)</td>
<td><p>画面にエラーを表示</p>
<p>出力制御有効で余剰制御中は全量制御とし出力制御をとめない</p></td>
</tr>
</tbody>
</table>

(※1) 電力計登録変更を行うと一旦復旧し、発生条件に当てはまれば再度発生する

## **GW間通信異常\<G8\>（C6-F.0）\<G\>**

Modbuｓ接続されているGＷ間の通信異常発生時の仕様を下記に記載する。\<G8\>

~~Modbus通信接続機器（電力計測ユニット、他GW、専用保護継電器）との通信異常発生時の仕様を下記に記載する。~~

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">発生検出方法</th>
<th style="text-align: center;">復旧条件</th>
<th style="text-align: center;">復旧検出方法</th>
<th style="text-align: center;">発生時の動作</th>
</tr>
</thead>
<tbody>
<tr>
<th><p>GW間<del>Modbus通信機器</del>の通信異常検出時&lt;G8&gt;</p>
<ol type="1">
<li><p>マスタ時</p></li>
</ol>
<p>スレーブより無応答295秒間経過時&lt;G6&gt;</p>
<p>２）スレーブ時</p>
<p>マスタから通信要求が295秒間無時&lt;G6&gt;</p></th>
<td><p>1)マスタ時</p>
<p>通信応答を評価して判断</p>
<p>２）スレーブ時</p>
<p>待ち受け時間を監視して判断　</p></td>
<td>通信復旧時</td>
<td><p>1)マスタ時</p>
<p>通信応答を評価して判断(※1) (※2)</p>
<p>２）スレーブ時</p>
<p>通信要求が届くかで判断(※2)</p></td>
<td><p>画面にエラーを表示</p>
<p>併設設定を解除する（復旧時は、自動で併設設定を有効にする）</p></td>
</tr>
</tbody>
</table>

(※1) Modbus機器登録変更を行うと一旦復旧し、発生条件に当てはまれば再度発生する\<G5\>

(※2) Modbus通信設定(マスタ/スレーブ)を変更すると一旦復旧し、発生条件に当てはまれば再度発生する\<G5\>

## 

## **LAN未接続(ソフト更新サーバ)** **(C7-1.0)**

> LAN未接続(ソフト更新サーバ)の仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 通信時にリンクアップしていない場合 | リンクアップの有無を評価して判断 | 正常にリンクアップ | ソフト更新サーバとの通信が成功した場合に復旧と判断 | 画面にエラーを表示 |

## **ソフト更新サーバ通信エラー (C7-2.0)**

> ソフト更新サーバ通信エラーの仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| サーバ接続に失敗した場合、および、通信タイムアウトが発生した場合(※1) | 接続処理の成否、通信タイムアウトの有無を評価して判断 | 正常に通信復帰 | ソフト更新サーバとの通信が成功した場合に復旧と判断 | 画面にエラーを表示 |

> (※1)条件に当てはまり、かつ、LAN未接続の条件も満たす時はLAN未接続エラーとなり、通信エラーは発生しない

## **ソフト更新サーバ通信システムエラー (C7-3.0)**

> ソフト更新サーバ通信システムエラーの仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 通信時にシステムコールが失敗した場合、および、通信処理実行時に内部異常(※1)が発生した場合 | 通信時のシステムコール応答、内部処理の実行結果を評価して判断 | － | － | システム異常へ遷移し再起動 |

> (※1)NULLチェックのNGなど、GWソフトウェア要因での通信処理失敗を指す

## **ソフト更新サーバエラー (C7-4.0)**

> ソフト更新サーバエラーの仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 通信時にサーバが異常な応答を返した場合 | サーバのレスポンスを評価して判断 | 正常に通信復帰 | ソフト更新サーバとの通信が成功した場合に復旧と判断 | 画面にエラーを表示 |

## **電力サーバ通信エラー (C7-9.0)**

> 電力サーバ通信エラーの仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| サーバ接続に失敗した場合、および、通信タイムアウトが発生した場合(※1) | 接続処理の成否、通信タイムアウトの有無を評価して判断 | 正常に通信復帰 | 電力サーバとの通信が成功した場合に復旧と判断 | 画面にエラーを表示 |

> (※1)条件に当てはまり、かつ、LAN未接続の条件も満たす時はLAN未接続エラーとなり、通信エラーは発生しない

## **電力サーバ通信システムエラー (C7-A.0)**

> 電力サーバ通信システムエラーの仕様を下記に記載する。

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">発生検出方法</th>
<th style="text-align: center;">復旧条件</th>
<th style="text-align: center;">復旧検出方法</th>
<th style="text-align: center;">発生時の動作</th>
</tr>
</thead>
<tbody>
<tr>
<th><p>通信時にシステムコールが失敗した場合、および、通信処理実行時に内部異常(※1)が発生した場合</p>
<p>また、電力サーバがE1XXX系のエラーを応答した場合(※2)</p></th>
<td>通信時のシステムコール応答、内部処理の実行結果、サーバのレスポンスを評価して判断</td>
<td>－</td>
<td>－</td>
<td>システム異常へ遷移し再起動</td>
</tr>
</tbody>
</table>

> (※1)NULLチェックのNGなど、GWソフトウェア要因での通信処理失敗を指す
>
> (※2)E1XXX系のエラーレスポンスはGWからのリクエスト内容に起因するためシステムエラーとし、それ以外のエラーレスポンスはサーバエラーとする

## **電力サーバエラー (C7-B.0)**

> 電力サーバエラーの仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 通信時にサーバが異常な応答を返した場合(※1) | サーバのレスポンスを評価して判断 | 正常に通信復帰 | 電力サーバとの通信が成功した場合に復旧と判断 | 画面にエラーを表示 |

> (※1) E1XXX系のエラーレスポンスはGWからのリクエスト内容に起因するためシステムエラーとし、それ以外のエラーレスポンスはサーバエラーとする

## **LAN未接続(電力サーバ) (C7-C.0)**

> LAN未接続(電力サーバ)の仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 通信時にリンクアップしていない場合 | リンクアップの有無を評価して判断 | 正常にリンクアップ | 電力サーバとの通信が成功した場合に復旧と判断 | 画面にエラーを表示 |

## **遠隔モニタサーバ通信エラー(データ通知) (C8-1.0)**

> 遠隔モニタサーバでHTTPによる通信エラーの仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| サーバ接続に失敗した場合、および、通信タイムアウトが発生した場合(※1) | 接続処理の成否、通信タイムアウトの有無を評価して判断 | 正常に通信復帰 | 遠隔モニタサーバとのHTTP通信が成功した場合に復旧と判断 | 画面にエラーを表示 |

> (※1)条件に当てはまり、かつ、LAN未接続の条件も満たす時はLAN未接続エラーとなり、通信エラーは発生しない

## **遠隔モニタサーバ通信システムエラー(データ通知) (C8-2.0)**

> 遠隔モニタサーバでHTTPによる通信システムエラーの仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 通信時にシステムコールが失敗した場合、および、通信処理実行時に内部異常(※1)が発生した場合 | 通信時のシステムコール応答、内部処理の実行結果を評価して判断 | － | － | システム異常へ遷移し再起動 |

> (※1)NULLチェックのNGなど、GWソフトウェア要因での通信処理失敗を指す

## **遠隔モニタサーバエラー(データ通知) (C8-3.0)**

> 遠隔モニタサーバでHTTPによるエラーの仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 通信時にサーバが異常な応答を返した場合 | サーバのレスポンスを評価して判断 | 正常に通信復帰 | 遠隔モニタサーバとのHTTP通信が成功した場合に復旧と判断 | 画面にエラーを表示 |

## **LAN未接続(遠隔モニタサーバ) (C8-4.0)**

> LAN未接続(遠隔モニタサーバ)の仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 通信時にリンクアップしていない場合 | リンクアップの有無を評価して判断 | 正常にリンクアップ | 遠隔モニタサーバとのHTTP通信が成功した場合に復旧と判断 | 画面にエラーを表示 |

## **遠隔モニタサーバ通信エラー(制御) (C8-5.0)**

> 遠隔モニタサーバでMQTTによる通信エラーの仕様を下記に記載する。

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">発生検出方法</th>
<th style="text-align: center;">復旧条件</th>
<th style="text-align: center;">復旧検出方法</th>
<th style="text-align: center;">発生時の動作</th>
</tr>
</thead>
<tbody>
<tr>
<th>サーバ接続に失敗した場合、および、通信タイムアウトが発生した場合(※1)</th>
<td>接続処理の成否、通信タイムアウトの有無を評価して判断</td>
<td>正常に通信復帰</td>
<td><h4 id="遠隔モニタサーバとのmqtt通信が成功した場合に復旧と判断" class="見出し5">遠隔モニタサーバとのMQTT通信が成功した場合に復旧と判断</h4></td>
<td>画面にエラーを表示</td>
</tr>
</tbody>
</table>

> (※1)条件に当てはまり、かつ、LAN未接続の条件も満たす時はLAN未接続エラーとなり、通信エラーは発生しない

## **遠隔モニタサーバ通信システムエラー(制御) (C8-6.0)**

> 遠隔モニタサーバでMQTTによる通信システムエラーの仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 通信時にシステムコールが失敗した場合、および、通信処理実行時に内部異常(※1)が発生した場合 | 通信時のシステムコール応答、内部処理の実行結果を評価して判断 | － | － | システム異常へ遷移し再起動 |

> (※1)NULLチェックのNGなど、GWソフトウェア要因での通信処理失敗を指す

## **遠隔モニタサーバエラー(制御) (C8-7.0)**

> 遠隔モニタサーバでMQTTによるエラーの仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 通信時にサーバが異常な応答を返した場合 | サーバのレスポンスを評価して判断 | 正常に通信復帰 | 遠隔モニタサーバとのMQTT通信が成功した場合に復旧と判断 | 画面にエラーを表示 |

## **LAN未接続(NTPサーバ) (C8-8.0)**

> LAN未接続(NTPサーバ)の仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 通信時にリンクアップしていない場合 | リンクアップの有無を評価して判断 | 正常にリンクアップ | NTPサーバとの通信が成功した場合に復旧と判断 | 画面にエラーを表示 |

## **NTPサーバ通信エラー (C8-9.0)**

> NTPサーバ通信エラーの仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 通信タイムアウトが発生した場合 | 通信タイムアウトの有無を評価して判断 | 正常に通信復帰 | NTPサーバとの通信が成功した場合に復旧と判断 | 画面にエラーを表示 |

## **NTPサーバ通信システムエラー (C8-A.0)**

> NTPサーバ通信システムエラーの仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 通信時にシステムコールが失敗した場合、および、通信処理実行時に内部異常(※1)が発生した場合 | 通信時のシステムコール応答、内部処理の実行結果を評価して判断 | － | － | システム異常へ遷移し再起動 |

> (※1)NULLチェックのNGなど、GWソフトウェア要因での通信処理失敗を指す

## **NTPサーバエラー (C8-B.0)**

> NTPサーバエラーの仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 通信時にサーバが異常な応答を返した場合 | サーバのレスポンスを評価して判断 | 正常に通信復帰 | NTPサーバとの通信が成功した場合に復旧と判断 | 画面にエラーを表示 |

## **蓄電残量低下(停電時) (C9-1.0)**

> 蓄電残量低下(停電時)の仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 蓄電PCSの通信で蓄電残量低下を検出した場合 | 蓄電PCS、~~ハイブリッド~~マルチ蓄電PCSの検出アドレス(※1)を読み出した値を評価して判断 | ・蓄電PCS、マルチ蓄電PCSで検出が解消 | 蓄電PCS、マルチ蓄電PCSの検出アドレス(※1)を読み出した値を評価して判断(※2) | 画面にエラーを表示 |

> (※1)42:001B「過放電防止アラーム情報」
>
> (※2) PCS登録変更を行うと一旦復旧し、発生条件に当てはまれば再度発生する

## **運転許可スイッチOFF (C9-2.0)**

> 運転許可スイッチOFFの仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 蓄電PCSの運転許可スイッチOFFを検出した場合 | 蓄電PCS、~~ハイブリッド~~マルチ蓄電PCS(\*)の検出アドレス(※1)を読み出した値を評価して判断 | ・蓄電PCSの運転許可スイッチをON（＊） | 蓄電PCS、マルチ蓄電PCSの検出アドレス(※1)を読み出した値を評価して判断(※2) | 画面にエラーを表示 |

> (\*)KPBP-A（マルチ蓄電）、KPEV-A(V2X-PCS)＜F5＞は、PCS側に運転許可スイッチがない。
>
> また検出アドレス読み出し値は、スイッチON（固定値）となるため仕様上本エラーは発生しない。
>
> (※1)42:0003「運転スイッチ/運転許可スイッチ状態」
>
> (※2) PCS登録変更を行うと一旦復旧し、発生条件に当てはまれば再度発生する

## **放電停止SOC到達 (C9-3.0)**

> 放電停止SOC到達の仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 蓄電PCSの通信で放電停止SOC到達を検出した場合 | 蓄電PCS、~~ハイブリッド~~マルチ蓄電PCSの検出アドレス(※1)を読み出した値を評価して判断 | ・蓄電PCS、マルチ蓄電PCSで検出が解消 | 蓄電PCS、マルチ蓄電PCSの検出アドレス(※1)を読み出した値を評価して判断(※2) | 画面にエラーを表示 |

> (※1)42:2006「蓄電池給電無効（SOC下限判定）」
>
> (※2) PCS登録変更を行うと一旦復旧し、発生条件に当てはまれば再度発生する

## **システム組み合わせエラー(誤パワーコンディショナ 組み合わせ) (C9-4.0)**＜F5＞

> JET認証条件等で、接続するPCSが限定されるGWにて接続対象以外のPCSを検出した場合の
>
> 仕様について記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| 接続するPCSが限定されるGWにて接続対象以外のPCSを検出した場合。 | “機種判別要素：パワコン種別”値(\*1)、“機種判別要素：PCS”値（\*2） | ・接続対象PCSに置き換え後GW再起動実施。 | － | システム異常へ遷移し再起動 |

(\*1)機種判別要素：パワコン種別・・・Compoway/F通信IF仕様書変数42:101E

(\*2)機種判別要素：PCS　　　　　　・・・同C2:9999

（1）出荷時設定内アプリ設定の端末種別値　と　PCS変数　機種判別要素：パワコン種別値　を突合する。

（2）GW出荷時設定内アプリ設定の機種判別要素値とPCS変数　機種判別要素：PCS値　を突合する。　

（3）(1)、(2)とも一致していれば接続対象PCSとし、どちらかが不一致ならば接続対象外とする。

　（表）　PCS種別毎の接続対象一覧

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 11%" />
<col style="width: 9%" />
<col style="width: 12%" />
<col style="width: 11%" />
<col style="width: 15%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr>
<th rowspan="2">No.</th>
<th rowspan="2">PCS種別</th>
<th colspan="2">GW出荷時設定内アプリ設定</th>
<th colspan="2">PCS機種判別要素</th>
<th rowspan="2">備考</th>
</tr>
<tr>
<th>端末種別</th>
<th><p>機種判別</p>
<p>要素</p></th>
<th>パワコン種別</th>
<th>PCS</th>
</tr>
</thead>
<tbody>
<tr>
<th>１</th>
<td>PV</td>
<td>０</td>
<td>0x00</td>
<td>０</td>
<td>0x00</td>
<td>PV－PCSはすべて接続可能とする。</td>
</tr>
<tr>
<th>２</th>
<td>KPAC-B</td>
<td>２</td>
<td>0x00</td>
<td>２</td>
<td>0x00</td>
<td>既存出荷済みPCS</td>
</tr>
<tr>
<th>３</th>
<td>KPBP-A</td>
<td>３</td>
<td>0x00</td>
<td>３</td>
<td>0x00</td>
<td>既存出荷済みPCS</td>
</tr>
<tr>
<th>４</th>
<td>KPBP-B</td>
<td>３</td>
<td>0x00</td>
<td>３</td>
<td>0x00</td>
<td></td>
</tr>
<tr>
<th>５</th>
<td>V2X</td>
<td>４</td>
<td>0x00</td>
<td>４</td>
<td>0x00</td>
<td></td>
</tr>
<tr>
<th></th>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

　　

## **システム組み合わせエラー(併設システム組み合わせ) (C9-4.1)＜G3＞**

> V2X蓄電池併設システムにおいて、接続されたシステムとの組み合わせで使用できない場合に検出する。

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">発生検出方法</th>
<th style="text-align: center;">復旧条件</th>
<th style="text-align: center;">復旧検出方法</th>
<th style="text-align: center;">発生時の動作</th>
</tr>
</thead>
<tbody>
<tr>
<th>併設設定有効時かつ型式ブロック有効時に接続対象外のGW型式を検出（将来対応）</th>
<td>Modbusマスタ側のGWで初回GW間通信時に読み出した型式およびOEM識別子により判定</td>
<td>接続対象のGW型式に置き換えてGWを再起動</td>
<td>－</td>
<td>画面にエラーを表示</td>
</tr>
<tr>
<th>併設設定有効時に接続対象外のModbus通信バージョンを検出</th>
<td>Modbusマスタ側のGWで個体情報取得時に読み出したModbus通信バージョンにより判定&lt;G4&gt;</td>
<td>GWをバージョンアップしてGWを再起動</td>
<td>－</td>
<td>画面にエラーを表示</td>
</tr>
<tr>
<th>併設設定有効時に併設非対応のPCSを検出</th>
<td><p>Modbusマスタ側、Modbusスレーブ側それぞれのGWで個体情報取得時に読み出した蓄電併設機能有無により判定&lt;G4&gt;</p>
<p>C2:1101 PCS機能有無１ bit19：　蓄電併設機能有無</p></td>
<td>PCSをバージョンアップしてGWを再起動</td>
<td>－</td>
<td>画面にエラーを表示</td>
</tr>
</tbody>
</table>

## **キーコード照合不一致（C9-5.0）**＜E＞＜F10＞

　キーコード照合処理で不一致時に出力する。

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">発生検出方法</th>
<th style="text-align: center;">復旧条件</th>
<th style="text-align: center;">復旧検出方法</th>
<th style="text-align: center;">発生時の動作</th>
</tr>
</thead>
<tbody>
<tr>
<th>・GW設定データ内キーコード照合が有効設定　かつ　PCSがマルチ蓄電でPVモード以外時に、起動時または個体識別情報変更時（各製造番号）における個体情報確定時に実行されるキーコード照合処理にて、不一致検出時</th>
<td>キーコード設定値と蓄電池製造番号からの生成値を照合。</td>
<td><p>キーコード設定時、設定値と蓄電池製造番号からの生成値との照合結果が一致時。</p>
<p>起動時または個体識別情報変更時（各製造番号）における個体情報確定時に実行されるキーコード照合処理にて一致時。</p></td>
<td>キーコード設定値と蓄電池製造番号からの生成値を照合。</td>
<td><p>運転切替（開始指示）を実行しない。</p>
<p>運転中のPCSは運転を継続する。</p></td>
</tr>
<tr>
<th>・GW設定データ内キーコード照合が有効設定　かつ　PCSがV2XでPVモード以外時に、起動時または個体識別情報変更時（各製造番号）における個体情報確定時に実行されるキーコード照合処理にて、不一致検出時</th>
<td>キーコード設定値とPCS本体製造番号からの生成値を照合。</td>
<td><p>キーコード設定時、設定値とPCS本体製造番号からの生成値との照合結果が一致時。</p>
<p>起動時または個体識別情報変更時（各製造番号）における個体情報確定時に実行されるキーコード照合処理にて一致時。</p></td>
<td>キーコード設定値とPCS本体製造番号からの生成値を照合。</td>
<td>同上。</td>
</tr>
</tbody>
</table>

## **パワーコンディショナ異常発生 (C9-6.0)**\<G1\>

|     |     |     |     |     |
|-----|-----|-----|-----|-----|
|     |     |     |     |     |
|     |     |     |     |     |

>  他社パワーコンディショナ異常発生時の仕様を下記に記載する。
>
> 　発生場所：ノードNo.
>
> 　フリーエリア：他社パワーコンディショナのエラーコード

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| ・Modbusスレーブなどで他社パワーコンディショナのエラーを通知 | 通信でエラーコードの通知 | ・通信でエラーコードが解除 | エラーコードのメモリエリアを評価して判断 | 画面にエラーを表示 |

## **手動復帰待ち** **(C9-7.0)\<G7\>**

> 手動復帰待ちの仕様を下記に記載する。

| 発生条件 | 発生検出方法 | 復旧条件 | 復旧検出方法 | 発生時の動作 |
|----|----|----|----|----|
| PCS状態が手動復帰待ちに変化 | コアプロセス：手動復帰待ち条件を評価して判断 | PCS状態が手動復帰待ち以外に変化 | コアプロセス：手動復帰解除条件を評価して判断 | 画面にエラーを表示 |

# 運用検出一覧

> 検出する運用の一覧を下記に記載する。

<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 10%" />
<col style="width: 24%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">コード</th>
<th style="text-align: center;">発生箇所</th>
<th style="text-align: center;">内容</th>
<th style="text-align: center;">詳細説明</th>
</tr>
</thead>
<tbody>
<tr>
<th style="text-align: center;">0000</th>
<td style="text-align: center;">-</td>
<td>起動</td>
<td>起動（AC電源ON、リセット）時に常に記録される。</td>
</tr>
<tr>
<th style="text-align: center;">0010</th>
<td style="text-align: center;">-</td>
<td>検査モード開始</td>
<td>工場で行われる検査モードを起動した時に記録される</td>
</tr>
<tr>
<th style="text-align: center;">0015</th>
<td style="text-align: center;">-</td>
<td>ソフトウェア更新</td>
<td>ソフトウェア更新を開始した時に記録される</td>
</tr>
<tr>
<th style="text-align: center;">0020</th>
<td style="text-align: center;">-</td>
<td>初期設定終了</td>
<td>初期設定が終了して、運用を開始した時点で記録される</td>
</tr>
<tr>
<th style="text-align: center;">0021</th>
<td style="text-align: center;">-</td>
<td>システム設定情報変更</td>
<td><p>初期設定以降にシステム情報設定を変更した場合に記録される<br />
PCS接続</p>
<p>電力計接続</p></td>
</tr>
<tr>
<th style="text-align: center;">0025</th>
<td style="text-align: center;">-</td>
<td>バックアップ</td>
<td>バックアップの実行で記録される</td>
</tr>
<tr>
<th style="text-align: center;">0026</th>
<td style="text-align: center;">-</td>
<td>リストア</td>
<td>リストアを実行した後に記録される</td>
</tr>
<tr>
<th style="text-align: center;">0031</th>
<td style="text-align: center;">-</td>
<td>無線LANモード変更</td>
<td>無線LANモード設定時に記録する。＜F1＞</td>
</tr>
<tr>
<th style="text-align: center;">0032</th>
<td style="text-align: center;">-</td>
<td>WPS無線接続成功（AP）</td>
<td>無線LAN（APモード）でWPS接続成功時に記録する。＜F1＞</td>
</tr>
<tr>
<th style="text-align: center;">0033</th>
<td style="text-align: center;">-</td>
<td>WPS無線接続失敗（AP）</td>
<td>無線LAN（APモード）でWPS接続失敗時に記録する。＜F1＞</td>
</tr>
<tr>
<th style="text-align: center;">0034</th>
<td style="text-align: center;">-</td>
<td>WPS無線接続成功（ST）</td>
<td>無線LAN（STモード）でWPS接続成功時に記録する。＜F1＞</td>
</tr>
<tr>
<th style="text-align: center;">0035</th>
<td style="text-align: center;">-</td>
<td>WPS無線接続失敗（ST）</td>
<td>無線LAN（STモード）でWPS接続失敗時に記録する。＜F1＞</td>
</tr>
<tr>
<th style="text-align: center;">0036</th>
<td style="text-align: center;">-</td>
<td>APモード子機接続</td>
<td>無線LAN（STモード）で子機（スマホ）接続時に記録する。＜F1＞</td>
</tr>
<tr>
<th style="text-align: center;">0037</th>
<td style="text-align: center;">-</td>
<td>STモード子機接続</td>
<td>無線LAN（STモード）で親機（スマホ）接続時に記録する。＜F1＞</td>
</tr>
<tr>
<th style="text-align: center;">0041</th>
<td style="text-align: center;">-</td>
<td>異常履歴消去</td>
<td>異常履歴を消去した場合に記録される</td>
</tr>
<tr>
<th style="text-align: center;">0054</th>
<td style="text-align: center;">-</td>
<td>日時変更開始</td>
<td>日時を変更した場合に記録される</td>
</tr>
<tr>
<th style="text-align: center;">0055</th>
<td style="text-align: center;">-</td>
<td>日時変更終了</td>
<td>日時を変更した場合に記録される（変更後の時刻）</td>
</tr>
<tr>
<th style="text-align: center;">0056</th>
<td style="text-align: center;">-</td>
<td>自動時刻変更開始</td>
<td>自動での時刻設定があった場合に記録される（時刻差が30秒以上時に記録）</td>
</tr>
<tr>
<th style="text-align: center;">0057</th>
<td style="text-align: center;">-</td>
<td>自動時刻変更終了</td>
<td>日時を変更した場合に記録される（変更後の時刻）</td>
</tr>
<tr>
<th style="text-align: center;">0060</th>
<td style="text-align: center;">-</td>
<td>無線LAN設定変更</td>
<td>無線LAN設定変更時に記録する。＜F1＞</td>
</tr>
<tr>
<th style="text-align: center;">0061</th>
<td style="text-align: center;">-</td>
<td>有線LAN設定変更</td>
<td>有線LANの設定を変更した場合に記録される</td>
</tr>
<tr>
<th style="text-align: center;">0062</th>
<td style="text-align: center;">-</td>
<td>パワーコンディショナ更新</td>
<td>パワーコンディショナのソフト更新を開始した時に記録される</td>
</tr>
<tr>
<th style="text-align: center;">0063</th>
<td style="text-align: center;">-</td>
<td>出力制御設定変更</td>
<td>出力制御設定を変更にした時に、記録される</td>
</tr>
<tr>
<th style="text-align: center;">0064</th>
<td style="text-align: center;">-</td>
<td>出力制御スケジュール更新</td>
<td>出力制御の固定スケジュールを更新した時に記録される</td>
</tr>
<tr>
<th style="text-align: center;">0065</th>
<td style="text-align: center;"><del>-</del></td>
<td>サーバ・HEMS接続変更</td>
<td>サーバ・HEMS設定を変更にした時に、記録される</td>
</tr>
<tr>
<th style="text-align: center;">0066</th>
<td style="text-align: center;">-</td>
<td>ソフトウェア更新予約</td>
<td>サーバからソフト更新がダウンロードされ予約された時に記録される</td>
</tr>
<tr>
<th style="text-align: center;">0067</th>
<td style="text-align: center;">-</td>
<td>ソフトウェア更新予約解消</td>
<td>ソフト更新が完了または、期限が来て解消された時に記録される</td>
</tr>
<tr>
<th style="text-align: center;">0077</th>
<td style="text-align: center;">-</td>
<td><p>マイグレーション実施開始</p>
<p>&lt;G〉</p></td>
<td>マイグレーションが実施開始された時に状態を保持しておき、運用履歴データ読込後に記録される。</td>
</tr>
<tr>
<th style="text-align: center;">0078</th>
<td style="text-align: center;">-</td>
<td><p>マイグレーション実施終了</p>
<p>&lt;G〉</p></td>
<td>マイグレーション終了時に状態を保持しておき、運用履歴データ読込後に記録される。</td>
</tr>
<tr>
<th style="text-align: center;">1010</th>
<td style="text-align: center;">-</td>
<td>パワーコンディショナ運転切替</td>
<td>パワーコンディショナの運転切替を行った場合に記録される</td>
</tr>
<tr>
<th style="text-align: center;">102c</th>
<td style="text-align: center;">設定機器No.</td>
<td>手動復帰待ち</td>
<td>PCSが手動復帰待ち状態になったのを検出（計測ユニット、表示ユニットに手動復帰待ち表示）</td>
</tr>
<tr>
<th style="text-align: center;">102d</th>
<td style="text-align: center;">設定機器No.</td>
<td>手動復帰解除</td>
<td>PCSが手動復帰待ち状態が解消したことを検出（計測ユニット、表示ユニットに手動復帰待ち表示が消える）</td>
</tr>
<tr>
<th style="text-align: center;">102f</th>
<td style="text-align: center;">設定機器No.</td>
<td>定期診断開始</td>
<td>蓄電池の定期診断が開始された場合に記録される</td>
</tr>
<tr>
<th style="text-align: center;">103a</th>
<td style="text-align: center;">設定機器No</td>
<td>定期診断終了</td>
<td>蓄電池の定期診断が終了された場合に記録される</td>
</tr>
<tr>
<th style="text-align: center;">103b</th>
<td style="text-align: center;">機器No</td>
<td>パワーコンディショナ接点入力ON</td>
<td>パワーコンディショナの接点入力がONになったときに記録される（内部コードで端子番号を記録）</td>
</tr>
<tr>
<th style="text-align: center;">103c</th>
<td style="text-align: center;">機器No</td>
<td>パワーコンディショナ接点入力OFF</td>
<td>パワーコンディショナの接点入力がOFFになったときに記録される（内部コードで端子番号を記録）</td>
</tr>
<tr>
<th style="text-align: center;">2000</th>
<td style="text-align: center;">-</td>
<td>設定保守開始</td>
<td>設定保守を開始した場合に記録される</td>
</tr>
<tr>
<th style="text-align: center;">2001</th>
<td style="text-align: center;">-</td>
<td>設定保守終了</td>
<td><p>設定保守を終了した場合に記録される</p>
<p>また、タイムアウト時も記録される</p></td>
</tr>
<tr>
<th style="text-align: center;">2002</th>
<td style="text-align: center;">機器No.</td>
<td>設定(書込み)</td>
<td>書込みを実行した場合に記録される</td>
</tr>
<tr>
<th style="text-align: center;">2003</th>
<td style="text-align: center;">機器No.</td>
<td>設定保守(動作指令)</td>
<td>動作指令を実行した場合に記録される</td>
</tr>
<tr>
<th style="text-align: center;">2004</th>
<td style="text-align: center;">機器No.</td>
<td>設定保守(任意)</td>
<td>任意コマンド(CompoWay/Fスルー)を実行した場合に記録される</td>
</tr>
</tbody>
</table>

## **起動 (0000)**

> 起動の仕様を下記に記載する。

| 発生条件             | 検出方法                                 |
|----------------------|------------------------------------------|
| 状態遷移が起動へ移行 | コアプロセス：起動状態への状態遷移で判断 |

## **検査モード開始 (0010)**

> 検査モード開始の仕様を下記に記載する。

| 発生条件                 | 検出方法                                 |
|--------------------------|------------------------------------------|
| 状態遷移が出荷検査へ移行 | コアプロセス：検査状態への状態遷移で判断 |

## **ソフトウェア更新 (0015)**

> ソフトウェア更新の仕様を下記に記載する。

| 発生条件               | 検出方法                                       |
|------------------------|------------------------------------------------|
| ソフトウェア更新の実行 | コアプロセス：ファームウェア更新処理開始で判断 |

## **初期設定終了 (0020)**

初期設定終了の仕様を下記に記載する。

| 発生条件       | 検出方法                                                 |
|----------------|----------------------------------------------------------|
| 初期設定の完了 | コアプロセス：初期設定状態から稼働状態への状態遷移で判断 |

> 初期設定終了時に運用履歴が削除されるため、初期設定中に行った設定操作の運用履歴は残らない。初期設定終了(0020)以降の履歴が残る。

## **システム設定情報変更 (0021)**

> システム設定情報変更の仕様を下記に記載する。フリーエリアに設定項目がわかる情報を記録する。

| 発生条件 | 検出方法 |
|----|----|
| PCS登録でPCS接続構成の変更 | コアプロセス：発生条件の設定が不揮発領域へ書き込み完了で判断 |
| ~~電力計の~~Modubus接続設定変更\<G\> | 同上 |
| 初期設定状態の変更 | 同上 |
| システム種別の設定変更 | 同上 |
| システム設定の設定変更 | 同上 |
| 時刻同期先設定変更 | 同上 |
| サーバ接続設定の変更 | 同上 |
| ~~併設設定~~併設運転有効無効設定の変更\<G\>\<G8\> | 同上 |

## **バックアップ (0025)**

> バックアップの仕様を下記に記載する。

| 発生条件 | 検出方法 |
|----|----|
| 保守データのバックアップ | コアプロセス：バックアップ実施要求を受け、バックアップ開始を判断 |

## **リストア (0026)**

> リストアの仕様を下記に記載する。

<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">検出方法</th>
</tr>
</thead>
<tbody>
<tr>
<th>保守データのリストア</th>
<td><p>コアプロセス：リストア終了を判断</p>
<p>※リストア中に運用履歴を書き戻すため、リストア実施後に記録する。</p>
<p>リストアの成否は問わない。</p></td>
</tr>
</tbody>
</table>

## **無線LANモード変更 (0031)**　＜F1＞＜F3＞

> 無線LANモード設定時に記録する。
>
> 設定内容（ST/AP/無）をフリーエリアに記録する。

| 発生条件 | 検出方法 |
|----|----|
| 無線LANモード(STA/AP/無)の変更 | コアプロセス：無線LANモードの変更API戻り値が正常を返す。 |

## **かんたん無線接続成功（APモード）(0032)** ＜F1＞＜F3＞

> 無線LAN（APモード）でかんたん無線接続成功時に記録する。

| 発生条件 | 検出方法 |
|----|----|
| 無線LANモードがAPの際のWPS接続完了判定 | コアプロセス：WPS接続機能(APモード)API実行後、WPS接続状態取得APIが接続成功を返す。\<F11\> |

## **かんたん無線接続失敗（APモード）(0033)** ＜F1＞＜F3＞

> 無線LAN（APモード）でかんたん無線接続失敗時に記録する。

| 発生条件 | 検出方法 |
|----|----|
| 無線LANモードがAPの際のWPS接続未完了判定 | コアプロセス：WPS接続機能(APモード)API実行後、WPS接続状態取得APIが接続失敗を返す または 接続中状態を返す時間がタイムアウト(10sec)する。\<F11\> |

## **かんたん無線接続成功（STAモード）(0034)** ＜F1＞＜F3＞

> 無線LAN（STAモード）でかんたん無線接続成功時に記録する。

| 発生条件 | 検出方法 |
|----|----|
| 無線LANモードがSTの際のWPS接続完了判定 | コアプロセス：WPS接続機能(STAモード)API実行後、WPS接続状態取得APIが接続成功を返す。\<F11\> |

## **かんたん無線接続失敗（STAモード） (0035**) ＜F1＞＜F3＞

> 無線LAN（STAモード）でかんたん無線接続失敗時に記録する。

| 発生条件 | 検出方法 |
|----|----|
| 無線LANモードがSTの際のWPS接続未完了判定 | コアプロセス：WPS接続機能(STAモード)API実行後、WPS接続状態取得APIが接続失敗を返す または 接続中状態を返す時間がタイムアウト(10sec)する。\<F11\> |

## **APモード子機接続 (0036)**　＜F1＞＜F3＞＜F10＞＜F11＞

> 無線LAN（APモード）で子機（スマホ）接続時に記録する。

<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">検出方法</th>
</tr>
</thead>
<tbody>
<tr>
<th>無線LANモードがAPの際の、スマホアプリからの初回接続</th>
<td><p>・監視周期10秒で接続済MACアドレスのリストを確認し、前回確認からの差異で追加を検知する。MACアドレスはGW起動から再起動までの間記憶する。&lt;F11&gt;</p>
<p>・WPS接続ではコアプロセス：WPS接続機能(APモード)APIを実行し、周期5秒でWPS接続状態取得APIで接続を確認、接続成功となったかどうか。&lt;F11&gt;</p></td>
</tr>
</tbody>
</table>

## **STAモード親機接続 (0037)** ＜F1＞＜F3＞＜F10＞＜F11＞

> 無線LAN（STAモード）で親機（無線ルータ）接続時に記録する。

<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">検出方法</th>
</tr>
</thead>
<tbody>
<tr>
<th>無線LANモードがSTの際の、無線ルータとの初回接続</th>
<td><p>・無線ＬＡＮ手動接続機能ＡＰＩ実行が成功する。&lt;F10&gt;&lt;F11&gt;</p>
<p>・コアプロセス：WPS接続機能(STAモード)API実行後、WPS接続状態取得APIが接続成功を返す。&lt;F11&gt;</p></td>
</tr>
</tbody>
</table>

## **異常履歴消去 (0041)**

> 異常履歴消去の仕様を下記に記載する。

| 発生条件         | 検出方法                             |
|------------------|--------------------------------------|
| 異常履歴の初期化 | コアプロセス：異常履歴消去要求を判断 |

## **日時変更開始 (0054)**

> 日時変更開始の仕様を下記に記載する。日時の変更幅を知るため、日時を変更する前の日時を記録する。

| 発生条件           | 検出方法                                             |
|--------------------|------------------------------------------------------|
| 手動時刻変更の開始 | コアプロセス：手動時刻変更要求による時刻設定前で判断 |

## **日時変更終了 (0055)**

> 日時変更終了の仕様を下記に記載する。日時の変更幅を知るため、日時を変更した日時を記録する。

| 発生条件           | 検出方法                                             |
|--------------------|------------------------------------------------------|
| 手動時刻変更の完了 | コアプロセス：手動時刻変更要求による時刻設定後で判断 |

## **自動時刻変更開始 (0056)**

> 自動時刻変更開始の仕様を下記に記載する。日時の変更幅を知るため、日時を変更する前の日時を記録する。30秒以上の時刻差が発生したときに記録する。

<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">検出方法</th>
</tr>
</thead>
<tbody>
<tr>
<th>自動時刻変更の開始</th>
<td><p>コアプロセス：自動時刻同期の時刻変更要求による時刻設定前で判断</p>
<p>(TimeManager)</p></td>
</tr>
</tbody>
</table>

## **自動時刻変更終了 (0057)**

> 自動時刻変更終了の仕様を下記に記載する。日時の変更幅を知るため、日時を変更した日時を記録する。

<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">検出方法</th>
</tr>
</thead>
<tbody>
<tr>
<th>自動時刻変更の完了</th>
<td><p>コアプロセス：自動時刻同期の時刻変更要求による時刻設定後で判断</p>
<p>(TimeManager)</p></td>
</tr>
</tbody>
</table>

## **無線LAN設定変更 (0060)　** ＜F1＞\<F13\>

> 無線LAN設定変更時に記録する。フリーエリアに設定内容を記録する。＜F1＞
>
> (\*)キーは保存しない\<F13\>

<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">検出方法</th>
</tr>
</thead>
<tbody>
<tr>
<th><p>無線LAN設定で、</p>
<p>・SSID,キー設定時</p>
<p>・アドレス設定時</p></th>
<td>コアプロセス：Wi-Fi設定が不揮発領域へ書き込み完了で判断</td>
</tr>
</tbody>
</table>

## **有線LAN設定変更 (0061)**

> 有線LAN設定変更の仕様を下記に記載する。

| 発生条件 | 検出方法 |
|----|----|
| ネットワーク設定の変更 | コアプロセス：有線\<F13\>ネットワーク設定が不揮発領域へ書き込み完了で判断 |

## **パワーコンディショナ更新 (0062)**

> パワーコンディショナ更新の仕様を下記に記載する。

<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">検出方法</th>
</tr>
</thead>
<tbody>
<tr>
<th>パワーコンディショナのファームアップ開始</th>
<td><p>コアプロセス：PCSへのファームアップ処理開始を判断</p>
<p>※処理要求の受付時ではなく、登録のある各PCSへのファームアップ開始処理時に記録される</p></td>
</tr>
</tbody>
</table>

## **出力制御設定変更 (0063)**

> 出力制御設定変更の仕様を下記に記載する。

| 発生条件 | 検出方法 |
|----|----|
| 出力制御設定の変更 | コアプロセス：出力制御設定が不揮発領域へ書き込み完了で判断 |

## **出力制御スケジュール更新 (0064)**

> 出力制御スケジュール更新の仕様を下記に記載する。

| 発生条件 | 検出方法 |
|----|----|
| 出力制御の固定スケジュールの更新 | 電力サーバ通信プロセス：固定スケジュールによる出力制御スケジュール更新で判断 |

## **サーバ・HEMS接続変更 (0065)**

> サーバ・HEMS接続変更の仕様を下記に記載する。接続先毎の変更が不明になるため、フリーエリアに変更先がわかる情報を記録する。

| 発生条件 | 検出方法 |
|----|----|
| 配信サーバ設定の変更 | コアプロセス：サーバ接続設定の発生条件の設定が不揮発領域へ書き込み完了で判断 |
| HEMS接続設定の変更 | 同上 |
| サービスサーバ接続設定の変更 | 同上 |

## **ソフトウェア更新予約 (0066)**

> ソフトウェア更新予約の仕様を下記に記載する。

| 発生条件 | 検出方法 |
|----|----|
| 配信サーバからファームをダウンロードし予約の開始 | サービスサーバ通信プロセス：予約通知受信時にコアプロセスにソフトウェア予約更新終了通知 |

## **ソフトウェア更新予約解消 (0067)**

> ソフトウェア更新予約解消の仕様を下記に記載する。

<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">検出方法</th>
</tr>
</thead>
<tbody>
<tr>
<th>ファームアップ完了</th>
<td><p>サービスサーバ通信プロセス：ファーム更新が成功した場合にコアプロセスにソフトウェア予約更新終了通知する</p>
<p>コアプロセス：ソフトウェア予約更新終了通知を判断</p></td>
</tr>
<tr>
<th>予約期限の超過</th>
<td><p>サービスサーバ通信プロセス：予約期限を超過した場合にコアプロセスにソフトウェア予約更新終了通知する</p>
<p>コアプロセス：同上</p></td>
</tr>
</tbody>
</table>

## **蓄電池ファーム更新 (0072)**

蓄電池ファーム更新の仕様を下記に記載する。

<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">検出方法</th>
</tr>
</thead>
<tbody>
<tr>
<th>蓄電池ファームアップ開始</th>
<td><p>コアプロセス：蓄電池ファームアップ処理開始を判断</p>
<p>※処理要求の受付時ではなく、登録のある各PCSへの蓄電池ファームアップ開始処理時に記録される</p></td>
</tr>
</tbody>
</table>

## **デバイスソフトウェア更新予約 (0073)**

> デバイスソフトウェア更新予約の仕様を下記に記載する。

| 発生条件 | 検出方法 |
|----|----|
| 配信サーバからデバイスファームをダウンロードし予約の開始 | サービスサーバ通信プロセス：予約通知受信時にコアプロセスにデバイスソフトウェア予約更新終了通知 |

## **デバイスソフトウェア更新予約解消 (0074)**

> デバイスソフトウェア更新予約解消の仕様を下記に記載する。

<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">検出方法</th>
</tr>
</thead>
<tbody>
<tr>
<th>デバイスファームアップ完了</th>
<td><p>サービスサーバ通信プロセス：デバイスファーム更新が成功した場合にコアプロセスにデバイスソフトウェア予約更新終了通知する</p>
<p>コアプロセス：デバイスソフトウェア予約更新終了通知を判断</p></td>
</tr>
<tr>
<th>予約期限の超過</th>
<td><p>サービスサーバ通信プロセス：予約期限を超過した場合にコアプロセスにデバイスソフトウェア予約更新終了通知する</p>
<p>コアプロセス：同上</p></td>
</tr>
</tbody>
</table>

## **サブデバイスソフトウェア更新予約 (0075)**

> サブデバイスソフトウェア更新予約の仕様を下記に記載する。

| 発生条件 | 検出方法 |
|----|----|
| 配信サーバからサブデバイスファームをダウンロードし予約の開始 | サービスサーバ通信プロセス：予約通知受信時にコアプロセスにサブデバイスソフトウェア予約更新終了通知 |

## **サブデバイスソフトウェア更新予約解消 (0076)**

> サブデバイスソフトウェア更新予約解消の仕様を下記に記載する。

<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">検出方法</th>
</tr>
</thead>
<tbody>
<tr>
<th>サブデバイスファームアップ完了</th>
<td><p>サービスサーバ通信プロセス：サブデバイスファーム更新が成功した場合にコアプロセスにサブデバイスソフトウェア予約更新終了通知する</p>
<p>コアプロセス：サブデバイスソフトウェア予約更新終了通知を判断</p></td>
</tr>
<tr>
<th>予約期限の超過</th>
<td><p>サービスサーバ通信プロセス：予約期限を超過した場合にコアプロセスにサブデバイスソフトウェア予約更新終了通知する</p>
<p>コアプロセス：同上</p></td>
</tr>
</tbody>
</table>

## マイグレーション実施開始 (0077) \<G\>

> マイグレーション実施の仕様を下記に記載する。

| 発生条件 | 検出方法 |
|----|----|
| GWアプリケーションが起動されたときにEEPROMおよびNANDのデータ形式が旧バージョンの形式であると判断してマイグレーション処理が実施 | GWアプリケーション起動時にEEPROMおよびNANDのデータ形式をチェックしてデータ形式のバージョンを判定する。 |

34. マイグレーション実施終了(0078) \<G\>

> マイグレーション実施の仕様を下記に記載する。フリーエリアにマイグレーション実施結果
>
> （OK、NG）を記録する。

<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">検出方法</th>
</tr>
</thead>
<tbody>
<tr>
<th><p>マイグレーション処理が正常終了した時</p>
<p>または、マイグレーション処理が異常終了した時</p></th>
<td><p>マイグレーション処理が正常に完了した時は結果ＯＫとする。</p>
<p>マイグレーション中にＮＡＮＤ読込/書込エラーが発生して処理中断となった時は結果ＮＧとする。</p></td>
</tr>
</tbody>
</table>

## **パワーコンディショナ運転切替 (1010)**

> パワーコンディショナ運転切替の仕様を下記に記載する。

| 発生条件            | 検出方法                                    |
|---------------------|---------------------------------------------|
| PCSの運転切替の実施 | コアプロセス：PCSへの運転切替処理開始で判断 |

## **手動復帰待ち (102c)**

> 手動復帰待ちの仕様を下記に記載する。

| 発生条件 | 検出方法 |
|----|----|
| PCSの状態が手動復帰待ちを検出 | コアプロセス：手動復帰待ち条件※を評価して判断 |

※PCS通信仕様書のPCS運転状態の項を参照

## **手動復帰解除 (102d)**

> 手動復帰解除の仕様を下記に記載する。

| 発生条件 | 検出方法 |
|----|----|
| PCSの状態が手動復帰解除を検出 | コアプロセス：手動復帰解除条件※を評価して判断 |

※PCS通信仕様書のPCS運転状態の項を参照

## **定期診断開始 (102f)**

> 定期診断実施の仕様を下記に記載する。

| 発生条件 | 検出方法 |
|----|----|
| PCSの状態が定期診断実施になったことを検出 | コアプロセス：定期診断状態の無効から有効への変化を評価して判断 |

## **定期診断終了 (103a)**

> 定期診断実施の仕様を下記に記載する。

| 発生条件 | 検出方法 |
|----|----|
| PCSの状態が定期診断実施から終了になったことを検出 | コアプロセス：定期診断状態の有効から無効への変化を評価して判断 |

## **パワーコンディショナ接点入力ON (103b)**

> パワーコンディショナ接点入力ONの仕様を下記に記載する。

| 発生条件 | 検出方法 |
|----|----|
| PCSの接点入力のいずれかのbitがOFFからONになったことを検出 | コアプロセス： PCSの入出力接点状態0～7ビットに於いて、無効から有効への変化を評価して判断 |

## **パワーコンディショナ接点入力OFF (103c)**

> パワーコンディショナ接点入力OFFの仕様を下記に記載する。

| 発生条件 | 検出方法 |
|----|----|
| PCSの接点入力のいずれかのbitがONからOFFになったことを検出 | コアプロセス： PCSの入出力接点状態0～7ビットに於いて、有効から無効への変化を評価して判断 |

## **設定保守開始 (2000)**

> 設定保守開始の仕様を下記に記載する。フリーエリアに設定保守開始したプロセス名を記録する。

| 発生条件 | 検出方法 |
|----|----|
| 設定保守開始条件に合致し、状態を設定保守に遷移 | コアプロセス：アプリケーションプロセスから設定保守開始通知で判断 |

## **設定保守終了 (2001)**

> 設定保守終了の仕様を下記に記載する。フリーエリアに設定保守終了したプロセス名を記録する。
>
> コアプロセスが設定保守終了した場合はフリーエリアに記録しない。

<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">発生条件</th>
<th style="text-align: center;">検出方法</th>
</tr>
</thead>
<tbody>
<tr>
<th>設定保守終了もしくはタイムアウトで状態が遠隔設定保守から別に遷移</th>
<td><p>コアプロセス：アプリケーションプロセスからの設定保守終了通知で判断</p>
<p>もしくは、コアプロセスで設定保守開始通知受信からタイムアウトで判断</p></td>
</tr>
</tbody>
</table>

## 設定保守(書込み) (2002) 　　

> 設定保守(書込み)の仕様を下記に記載する。外部通信からの契機を記録するために定義している。外部通信以外の契機でも記録されるが、他の運用履歴とあわせて解析することで実行主体が手動か遠隔かを判別する。フリーエリアに書き込む設定項目がわかる情報を記録する。

| 発生条件 | 検出方法 |
|----|----|
| 設定書込みを実施 | コアプロセス：アプリケーションプロセスからPCS設定書込み要求を判断 |

## **設定保守(動作指令) (2003)**

> 設定保守(動作指令)の仕様を下記に記載する。外部通信からの契機を記録するために定義している。外部通信以外の契機でも記録されるが、他の運用履歴とあわせて解析することで実行主体が手動か遠隔かを判別する。フリーエリアに行う動作指令がわかる情報を記録する。

| 発生条件 | 検出方法 |
|----|----|
| 動作指示を実施 | コアプロセスがアプリケーションプロセスからPCS動作指令要求を受信 |
|  | サービスサーバプロセス：設定制御サーバから動作指令(計測データ(現在値)送信)を受信 |
|  | サービスサーバプロセス：設定制御サーバから動作指令(計測データ(再送)送信)を受信 |
|  | サービスサーバプロセス：設定制御サーバから動作指令(構成情報送信)を受信 |
|  | サービスサーバプロセス：設定制御サーバから動作指令(GW端末ファーム要求)を受信 |
|  | サービスサーバプロセス：設定制御サーバから動作指令(デバイスファーム要求)を受信 |
|  | サービスサーバプロセス：設定制御サーバから動作指令(サブデバイスファーム要求)を受信 |

## **設定保守(任意) (2004)**

> 設定保守(任意)の仕様を下記に記載する。外部通信からの契機を記録するために定義している。外部通信以外の契機でも記録されるが、他の運用履歴とあわせて解析することで実行主体が手動か遠隔かを判別する。フリーエリアに行うCompoWayコマンドを記録する。

| 発生条件 | 検出方法 |
|----|----|
| CompoWay/Fスルーを実施 | ・コアプロセスがアプリケーションプロセスからPCSCompoWay/Fスルー要求を受信 |
